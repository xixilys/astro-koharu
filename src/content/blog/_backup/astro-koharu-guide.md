---
title: astro-koharu ä½¿ç”¨æŒ‡å—
link: astro-koharu-guide
catalog: true
date: 2025-12-29 21:55:00
math: true
quiz: true
description: astro-koharu åšå®¢çš„å®Œæ•´ä½¿ç”¨æŒ‡å—ï¼ŒåŒ…å«å¿«é€Ÿå¼€å§‹ã€é…ç½®è¯´æ˜ã€æ–‡ç« ç³»ç»Ÿã€ç•Œé¢åŠŸèƒ½ç­‰è¯¦ç»†ä»‹ç»
tags:
  - Astro
  - åšå®¢
  - æ•™ç¨‹
categories:
  - å·¥å…·
---

ä¸€ä»½å®Œæ•´çš„ astro-koharu åšå®¢ç³»ç»Ÿä½¿ç”¨æŒ‡å—ï¼Œå¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹å¹¶å……åˆ†åˆ©ç”¨æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§ã€‚

https://github.com/cosZone/astro-koharu

## å¿«é€Ÿå¼€å§‹

### é¡¹ç›®ç®€ä»‹

astro-koharu æ˜¯ä¸€ä¸ªåŸºäº Astro 5.x æ„å»ºçš„ç°ä»£åŒ–åšå®¢ç³»ç»Ÿï¼Œä» Hexo è¿ç§»è€Œæ¥ï¼Œè®¾è®¡çµæ„Ÿå’Œåˆè¡·éƒ½æ¥è‡ª [Shoka](https://github.com/amehime/hexo-theme-shoka) ä¸»é¢˜ã€‚æ¬¢è¿ [fork](https://github.com/cosZone/astro-koharu/fork) å‡ºæ¥åˆ¶ä½œè‡ªå·±çš„ä¸»é¢˜ã€‚

**æ ¸å¿ƒç‰¹ç‚¹ï¼š**

- åŸºäº Astro 5.xï¼Œé™æ€ç«™ç‚¹ç”Ÿæˆï¼Œæ€§èƒ½ä¼˜å¼‚
- ä¼˜é›…çš„æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- åŸºäº Pagefind çš„æ— åç«¯å…¨ç«™æœç´¢
- å®Œæ•´çš„ Markdown å¢å¼ºåŠŸèƒ½ï¼ˆGFMã€ä»£ç é«˜äº®ã€è‡ªåŠ¨ç›®å½•ï¼‰
- çµæ´»çš„å¤šçº§åˆ†ç±»ä¸æ ‡ç­¾ç³»ç»Ÿï¼ˆä» Shoka ä¸»é¢˜è¿ç§»ï¼Œåç»­ä¼šè€ƒè™‘å°†å…¶æ”¹ä¸ºå¯å…³é—­çš„ï¼‰
- å¤šç³»åˆ—æ–‡ç« æ”¯æŒï¼ˆå‘¨åˆŠã€ä¹¦æ‘˜ç­‰è‡ªå®šä¹‰ç³»åˆ—ï¼Œæ”¯æŒè‡ªå®šä¹‰ URL slugï¼‰
- å“åº”å¼è®¾è®¡
- è‰ç¨¿ä¸ç½®é¡¶åŠŸèƒ½
- é˜…è¯»è¿›åº¦æ¡ä¸é˜…è¯»æ—¶é—´ä¼°ç®—
- ç§»åŠ¨ç«¯æ–‡ç« é˜…è¯»å¤´éƒ¨
- å‹é“¾ç³»ç»Ÿä¸å½’æ¡£é¡µé¢
- RSS è®¢é˜…æ”¯æŒ
- LQIPï¼ˆä½è´¨é‡å›¾ç‰‡å ä½ç¬¦ï¼‰
- åœ£è¯ç‰¹è¾‘ï¼ˆå¯å¼€å…³ï¼‰

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/cosZone/astro-koharu.git
cd astro-koharu

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm preview
```

### å¿«é€Ÿéƒ¨ç½²

ä½¿ç”¨ Vercel è¿›è¡Œä¸€é”®éƒ¨ç½²ï¼š

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/cosZone/astro-koharu&project-name=astro-koharu&repository-name=astro-koharu)

## åŸºæœ¬é…ç½®

### ç«™ç‚¹é…ç½®

ç¼–è¾‘ `config/site.yaml` æ–‡ä»¶é…ç½®ç«™ç‚¹åŸºæœ¬ä¿¡æ¯ï¼š

```yaml
# =============================================================================
# ç«™ç‚¹åŸºç¡€ä¿¡æ¯
# =============================================================================
site:
  title: ä½™å¼¦ã®åšå®¢ # ç½‘ç«™æ ‡é¢˜
  alternate: cosine # è‹±æ–‡çŸ­åï¼ˆç”¨ä½œ logo æ–‡æœ¬ï¼‰
  subtitle: WA çš„ä¸€å£°å°±å“­äº† # å‰¯æ ‡é¢˜
  name: cos # ç«™ç‚¹ä½œè€…ç®€ç§°
  description: FE / ACG / æ‰‹å·¥ / æ·±è‰²æ¨¡å¼å¼ºè¿«ç—‡ / INFP # ç«™ç‚¹ç®€ä»‹
  avatar: /img/avatar.webp # å¤´åƒè·¯å¾„
  showLogo: true # æ˜¯å¦æ˜¾ç¤º logo
  author: cos # æ–‡ç« ä½œè€…
  url: https://blog.cosine.ren/ # ç«™ç‚¹åŸŸå
  startYear: 2020 # ç«™ç‚¹åˆ›å»ºå¹´ä»½
  keywords: # SEO å…³é”®è¯
    - cos
    - cosine
    - åšå®¢
    - æŠ€æœ¯
    - å‰ç«¯
```

### æœ¬åœ°è½» CMS åº”ç”¨

æœ¬é¡¹ç›®æä¾›ç‹¬ç«‹çš„ CMS ç®¡ç†åº”ç”¨ï¼Œæ”¯æŒæ–‡ç« ç®¡ç†ã€æµè§ˆå™¨å†…ç¼–è¾‘ã€Markdown é¢„è§ˆç­‰åŠŸèƒ½ã€‚

![](https://r2.cosine.ren/i/2026/01/a1c1d69ef48c758010e553e882e470db.webp)
![](https://r2.cosine.ren/i/2026/01/6c6956e3b49729ddf272669f3f738f13.webp)
![](https://r2.cosine.ren/i/2026/01/1d86afe19ed2fe921990657685393c2d.webp)

**å¯åŠ¨ CMSï¼š**

```bash
# é¦–æ¬¡ä½¿ç”¨éœ€å®‰è£…ä¾èµ–
pnpm cms:install

# å¯åŠ¨ CMSï¼ˆé»˜è®¤ç«¯å£ 4322ï¼‰
pnpm cms
```

CMS æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- ğŸ“Š æ–‡ç« ä»ªè¡¨ç›˜ï¼šæŸ¥çœ‹æ–‡ç« ç»Ÿè®¡ã€åˆ†ç±»åˆ†å¸ƒã€æœ€è¿‘æ›´æ–°
- ğŸ“ æµè§ˆå™¨å†…ç¼–è¾‘å™¨ï¼šåŸºäº BlockNote çš„å¯Œæ–‡æœ¬ç¼–è¾‘ï¼Œæ”¯æŒ Markdown
- ğŸ”„ è‰ç¨¿/å‘å¸ƒåˆ‡æ¢ï¼šä¸€é”®åˆ‡æ¢æ–‡ç« çŠ¶æ€
- ğŸ“Œ ç½®é¡¶ç®¡ç†ï¼šå¿«é€Ÿç½®é¡¶/å–æ¶ˆç½®é¡¶æ–‡ç« 
- â• æ–°å»ºæ–‡ç« ï¼šäº¤äº’å¼åˆ›å»ºæ–‡ç« ï¼Œè‡ªåŠ¨ç”Ÿæˆ frontmatter

### æœ¬åœ°ç¼–è¾‘å™¨è·³è½¬

æ–‡ç« é¡µçš„ç¼–è¾‘æŒ‰é’®æ”¯æŒä¸€é”®è·³è½¬åˆ°æœ¬åœ°ç¼–è¾‘å™¨ï¼ˆVS Code / Cursor / Zed ç­‰ï¼‰ã€‚

**é…ç½®æ–‡ä»¶ï¼š** `config/site.yaml` çš„ `dev` éƒ¨åˆ†

```yaml
dev:
  localProjectPath: "/Users/yourname/path/to/astro-koharu" # æœ¬åœ°é¡¹ç›®ç»å¯¹è·¯å¾„
  contentRelativePath: "src/content/blog" # åšå®¢å†…å®¹ç›®å½•
  editors:
    - id: vscode
      name: VS Code
      icon: devicon-plain:vscode # å¯ä» https://icon-sets.iconify.design/ æœå¯»å›¾æ ‡
      urlTemplate: "vscode://file{path}"
    - id: cursor
      name: Cursor
      icon: simple-icons:cursor
      urlTemplate: "cursor://file{path}"
    - id: zed
      name: Zed
      icon: simple-icons:zedindustries
      urlTemplate: "zed://file{path}"
```

**é…ç½®è¯´æ˜ï¼š**

- `localProjectPath` å¿…é¡»æ˜¯æœ¬æœºçš„ç»å¯¹è·¯å¾„ï¼Œå¦åˆ™æ— æ³•ç”Ÿæˆæ­£ç¡®çš„æ–‡ä»¶è·¯å¾„
- `urlTemplate` æ”¯æŒ `{path}` å ä½ç¬¦ï¼Œä¼šè¢«æ›¿æ¢ä¸ºæ–‡ä»¶çš„å®Œæ•´è·¯å¾„
- é…ç½®åï¼Œæ–‡ç« é¡µä¼šæ˜¾ç¤ºç¼–è¾‘æŒ‰é’®ï¼Œç‚¹å‡»å¯ç›´æ¥åœ¨æœ¬åœ°ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–‡ä»¶

**ç‰¹è‰²åˆ†ç±»é…ç½®ï¼š**

åœ¨é¦–é¡µåº•éƒ¨å±•ç¤ºçš„ç²¾é€‰åˆ†ç±»å¡ç‰‡ï¼š

```yaml
featuredCategories:
  - link: life # åˆ†ç±»é“¾æ¥ï¼ˆå¯¹åº” category_mapï¼‰
    label: éšç¬” # æ˜¾ç¤ºåç§°
    image: /img/cover/2.webp # å°é¢å›¾ç‰‡
    description: ç”Ÿæ´»è®°å½•ã€å¹´åº¦æ€»ç»“ç­‰ # æè¿°
  - link: note/front-end
    label: å‰ç«¯ç¬”è®°
    image: /img/cover/1.webp
    description: å‰ç«¯ç›¸å…³çš„ç¬”è®°
  # ... æ›´å¤šåˆ†ç±»
```

**å¤šç³»åˆ—æ–‡ç« é…ç½®ï¼š**

é…ç½®ç‰¹è‰²ç³»åˆ—ï¼ˆå¦‚å‘¨åˆŠã€ä¹¦æ‘˜ç­‰ï¼‰ï¼Œæ”¯æŒå¤šä¸ªç³»åˆ—ï¼Œæ¯ä¸ªç³»åˆ—æ‹¥æœ‰ç‹¬ç«‹é¡µé¢å’Œè‡ªå®šä¹‰ URLï¼š

```yaml
featuredSeries:
  - slug: weekly # URL è·¯å¾„: /weeklyï¼ˆå¿…å¡«ï¼Œä½œä¸ºé¡µé¢è·¯ç”±ï¼‰
    categoryName: å‘¨åˆŠ # åˆ†ç±»åç§°ï¼ˆç”¨äºåŒ¹é…æ–‡ç« ï¼‰
    label: FE Bits # æ˜¾ç¤ºæ ‡ç­¾
    fullName: FE Bits å‰ç«¯å‘¨å‘¨è°ˆ # å®Œæ•´åç§°
    description: | # æè¿°ï¼ˆæ”¯æŒå¤šè¡Œï¼‰
      ä¹‹å‰åœ¨è‡ªå·±çš„é¢‘é“è¿›è¡Œä¸€äº›è¾“å‡ºï¼Œäºæ˜¯æœ‰äº†è¿™ä¸ªå‘¨åˆŠï¼
      æ›´æ–°æ—¶é—´æœŸæœ›æ˜¯åœ¨æ¯å‘¨å¤©
    cover: /img/weekly_header.webp # å°é¢å›¾
    enabled: true # æ˜¯å¦å¯ç”¨
    icon: ri:newspaper-line # å¯¼èˆªå›¾æ ‡ï¼ˆå¯é€‰ï¼‰
    highlightOnHome: true # æ˜¯å¦åœ¨é¦–é¡µé«˜äº®æœ€æ–°æ–‡ç« ï¼ˆå¯é€‰ï¼Œé»˜è®¤ trueï¼‰
    links: # ç›¸å…³é“¾æ¥
      github: https://github.com/your-username/your-repo
      rss: /rss.xml

  - slug: reading # URL è·¯å¾„: /reading
    categoryName: ä¹¦æ‘˜
    label: è¯»ä¹¦ç¬”è®°
    fullName: æˆ‘çš„è¯»ä¹¦ç¬”è®°
    description: è¯»ä¹¦æ‘˜å½•ä¸æ„Ÿæ‚Ÿ
    cover: /img/reading_header.webp
    enabled: true
    highlightOnHome: false # æ­¤ç³»åˆ—ä¸åœ¨é¦–é¡µé«˜äº®
```

**å­—æ®µè¯´æ˜ï¼š**

| å­—æ®µ              | å¿…å¡« | è¯´æ˜                                 |
| ----------------- | ---- | ------------------------------------ |
| `slug`            | âœ…   | URL è·¯å¾„ï¼Œå¦‚ `weekly` å¯¹åº” `/weekly` |
| `categoryName`    | âœ…   | åˆ†ç±»åç§°ï¼Œç”¨äºåŒ¹é…æ–‡ç«                |
| `label`           | âŒ   | æ˜¾ç¤ºæ ‡ç­¾ï¼ˆé»˜è®¤ä½¿ç”¨ categoryNameï¼‰    |
| `enabled`         | âŒ   | æ˜¯å¦å¯ç”¨æ­¤ç³»åˆ—ï¼ˆé»˜è®¤ trueï¼‰          |
| `fullName`        | âŒ   | å®Œæ•´åç§°ï¼ˆç”¨äºé¡µé¢æ ‡é¢˜ï¼‰             |
| `description`     | âŒ   | ç³»åˆ—æè¿°                             |
| `cover`           | âŒ   | å°é¢å›¾ç‰‡è·¯å¾„                         |
| `icon`            | âŒ   | å¯¼èˆªå›¾æ ‡ï¼ˆIconify æ ¼å¼ï¼‰             |
| `highlightOnHome` | âŒ   | æ˜¯å¦åœ¨é¦–é¡µé«˜äº®æœ€æ–°æ–‡ç« ï¼ˆé»˜è®¤ trueï¼‰  |
| `links`           | âŒ   | ç›¸å…³é“¾æ¥ï¼ˆgithubã€rss ç­‰ï¼‰           |

### ç¤¾äº¤åª’ä½“é…ç½®

åœ¨ `config/site.yaml` ä¸­é…ç½®ç¤¾äº¤åª’ä½“é“¾æ¥ï¼š

```yaml
social:
  github:
    url: https://github.com/your-username
    icon: ri:github-fill # Iconify å›¾æ ‡å
    color: "#191717" # ä¸»é¢˜è‰²
  bilibili:
    url: https://space.bilibili.com/your-uid
    icon: ri:bilibili-fill
    color: "#da708a"
  email:
    url: mailto:your@email.com
    icon: ri:mail-line
    color: "#55acd5"
  rss:
    url: /rss.xml
    icon: ri:rss-line
    color: "#ff6600"
  # ... æ›´å¤šå¹³å°
```

æ”¯æŒçš„å¹³å°ï¼šGitHub, Twitter, Bilibili, ç½‘æ˜“äº‘éŸ³ä¹, Email, RSS ç­‰ã€‚å®Œæ•´é…ç½®è¯·å‚è€ƒ `config/site.yaml` æ–‡ä»¶ã€‚

### å¯¼èˆªé…ç½®

åœ¨ `config/site.yaml` ä¸­è‡ªå®šä¹‰å¯¼èˆªèœå•ï¼š

```yaml
navigation:
  - name: é¦–é¡µ
    path: /
    icon: fa6-solid:house-chimney
  - name: å‘¨åˆŠ
    path: /weekly # å¯¹åº” featuredSeries ä¸­ slug: weekly çš„ç³»åˆ—
    icon: ri:newspaper-line
  - name: è¯»ä¹¦ç¬”è®°
    path: /reading # å¯¹åº” featuredSeries ä¸­ slug: reading çš„ç³»åˆ—
    icon: ri:book-open-line
  - name: æ–‡ç« 
    icon: ri:quill-pen-ai-fill
    children: # æ”¯æŒåµŒå¥—å­èœå•
      - name: åˆ†ç±»
        path: /categories
        icon: ri:grid-fill
      - name: æ ‡ç­¾
        path: /tags
        icon: fa6-solid:tags
      - name: å½’æ¡£
        path: /archives
        icon: ri:archive-2-fill
  - name: å‹é“¾
    path: /friends
    icon: ri:links-line
  - name: å…³äº
    path: /about
    icon: fa6-regular:circle-user
```

> **æ³¨æ„**ï¼šç³»åˆ—é¡µé¢çš„è·¯å¾„æ ¼å¼ä¸º `/{slug}`ï¼Œéœ€è¦ä¸ `featuredSeries` ä¸­é…ç½®çš„ `slug` å­—æ®µä¸€è‡´ã€‚

### åˆ†ç±»æ˜ å°„é…ç½®

åœ¨ `config/site.yaml` ä¸­é…ç½®ä¸­æ–‡åˆ†ç±»ååˆ° URL slug çš„æ˜ å°„ï¼š

```yaml
# =============================================================================
# Category Map
# Maps Chinese category names to URL-friendly English slugs
# =============================================================================
categoryMap:
  # Primary categories
  éšç¬”: life
  ç¬”è®°: note
  å·¥å…·: tools
  å‘¨åˆŠ: weekly # ç”¨äºåˆ†ç±»é¡µé¢ /categories/weekly
  ä¹¦æ‘˜: reading # ç”¨äºåˆ†ç±»é¡µé¢ /categories/reading
  # Secondary categories (for nested paths)
  å‰ç«¯: front-end
  # Add more as needed:
  # åç«¯: back-end
  # ç®—æ³•: algorithm
```

è¿™æ ·ï¼Œ"éšç¬”" åˆ†ç±»çš„ URL ä¼šæ˜¯ `/categories/life`ï¼Œè€Œä¸æ˜¯ `/categories/éšç¬”`ã€‚

> **æ³¨æ„**ï¼š`categoryMap` ä»…ç”¨äºåˆ†ç±»é¡µé¢ï¼ˆ`/categories/*`ï¼‰çš„ URL æ˜ å°„ã€‚ç³»åˆ—é¡µé¢çš„ URLï¼ˆå¦‚ `/weekly`ã€`/reading`ï¼‰ç”± `featuredSeries` ä¸­çš„ `slug` å­—æ®µå•ç‹¬é…ç½®ã€‚

## æ–‡ç« ç³»ç»Ÿ

### åˆ›å»ºæ–‡ç« 

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ Koharu CLIï¼ˆæ¨èï¼‰**

ä½¿ç”¨äº¤äº’å¼ CLI å·¥å…·å¿«é€Ÿåˆ›å»ºæ–‡ç« ï¼š

```bash
pnpm koharu new post
```

CLI å·¥å…·ä¼šå¼•å¯¼ä½ è¾“å…¥æ ‡é¢˜ã€åˆ†ç±»ã€æ ‡ç­¾ç­‰ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆ frontmatter å’Œ markdown æ–‡ä»¶ã€‚

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»º**

åœ¨ `src/content/blog/` ç›®å½•ä¸‹åˆ›å»º Markdown æ–‡ä»¶ã€‚ç›®å½•ç»“æ„ä¼šå½±å“æ–‡ç« çš„åˆ†ç±»ï¼š

```plain
src/content/blog/
â”œâ”€â”€ life/              # éšç¬”åˆ†ç±»
â”‚   â””â”€â”€ 2024-life-review.md
â”œâ”€â”€ note/
â”‚   â”œâ”€â”€ front-end/     # ç¬”è®° > å‰ç«¯
â”‚   â”‚   â””â”€â”€ react/
â”‚   â”‚       â””â”€â”€ Reactå­¦ä¹ å°è®°.md
â”‚   â””â”€â”€ algorithm/     # ç¬”è®° > ç®—æ³•
â”‚       â””â”€â”€ åŠ¨æ€è§„åˆ’å­¦ä¹ ç¬”è®°.md
â””â”€â”€ tools/             # å·¥å…·åˆ†ç±»
    â””â”€â”€ vscodeæ’ä»¶æ¨è.md
```

### Frontmatter å­—æ®µè¯´æ˜

æ¯ç¯‡æ–‡ç« å¼€å¤´éœ€è¦åŒ…å« YAML frontmatterï¼š

**å¿…å¡«å­—æ®µï¼š**

```yaml
---
title: æ–‡ç« æ ‡é¢˜ # å¿…å¡«
date: 2024-12-06 # å¿…å¡«ï¼Œå‘å¸ƒæ—¥æœŸ
---
```

**å¸¸ç”¨å¯é€‰å­—æ®µï¼š**

```yaml
---
title: æ–‡ç« æ ‡é¢˜
date: 2024-12-06
updated: 2024-12-15 # æœ€è¿‘æ›´æ–°æ—¶é—´ï¼ˆå¯é€‰ï¼Œå­˜åœ¨æ—¶ä¼šåœ¨æ–‡ç« é¡µæ˜¾ç¤ºï¼‰
description: æ–‡ç« æ‘˜è¦æè¿° # ç”¨äº SEO å’Œåˆ—è¡¨å±•ç¤ºï¼Œå¦‚ä¸å¡«å†™ä¼šè‡ªåŠ¨ä½¿ç”¨ AI æ‘˜è¦æˆ–æå–æ­£æ–‡å‰ 150 å­—
link: custom-url-slug # è‡ªå®šä¹‰ URLï¼ˆé»˜è®¤ä½¿ç”¨æ–‡ä»¶åï¼‰
cover: /img/cover/1.webp # å°é¢å›¾ç‰‡
tags: # æ ‡ç­¾åˆ—è¡¨
  - JavaScript
  - React
categories: # åˆ†ç±»ï¼ˆè§ä¸‹æ–¹è¯¦ç»†è¯´æ˜ï¼‰
  - ç¬”è®°
subtitle: å‰¯æ ‡é¢˜ # æ–‡ç« å‰¯æ ‡é¢˜
catalog: true # æ˜¯å¦æ˜¾ç¤ºç›®å½•ï¼ˆé»˜è®¤ trueï¼‰
tocNumbering: true # æ˜¯å¦æ˜¾ç¤ºç›®å½•ç¼–å·ï¼ˆé»˜è®¤ trueï¼‰
draft: false # æ˜¯å¦ä¸ºè‰ç¨¿ï¼ˆé»˜è®¤ falseï¼‰
sticky: false # æ˜¯å¦ç½®é¡¶ï¼ˆé»˜è®¤ falseï¼‰
excludeFromSummary: false # æ˜¯å¦æ’é™¤ AI æ‘˜è¦å’Œç›¸ä¼¼åº¦è®¡ç®—ï¼ˆé»˜è®¤ falseï¼Œç³»åˆ—æ–‡ç« å»ºè®®è®¾ä¸º trueï¼‰
math: false # æ˜¯å¦å¯ç”¨æ•°å­¦å…¬å¼æ¸²æŸ“ï¼ˆé»˜è®¤ falseï¼Œå¯ç”¨åæ”¯æŒ KaTeXï¼‰
quiz: false # æ˜¯å¦å¯ç”¨ç»ƒä¹ é¢˜äº¤äº’ï¼ˆé»˜è®¤ falseï¼Œå¯ç”¨åæ”¯æŒå››ç§é¢˜å‹ï¼‰
---
```

**å…³äº description å­—æ®µï¼š**

æ–‡ç« æè¿°çš„ä¼˜å…ˆçº§ï¼šæ‰‹å†™ `description` > AI è‡ªåŠ¨æ‘˜è¦ > Markdown æ­£æ–‡å‰ 150 å­—

- å»ºè®®ä¸ºé‡è¦æ–‡ç« æ‰‹å†™æè¿°ï¼Œä»¥è·å¾—æ›´å¥½çš„ SEO æ•ˆæœ
- å¦‚æœçœç•¥æè¿°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ AI ç”Ÿæˆçš„æ‘˜è¦ï¼ˆéœ€è¿è¡Œ `pnpm generate:summaries`ï¼‰
- å¦‚æœæ—¢æ²¡æœ‰æ‰‹å†™æè¿°ä¹Ÿæ²¡æœ‰ AI æ‘˜è¦ï¼Œåˆ™è‡ªåŠ¨æå–æ–‡ç« æ­£æ–‡çš„å‰ 150 ä¸ªå­—ç¬¦

**å…³äº link å­—æ®µï¼ˆè‡ªå®šä¹‰ URLï¼‰ï¼š**

âš ï¸ **é‡è¦**ï¼š`link` å­—æ®µä¼šè¢«**è‡ªåŠ¨è½¬æ¢ä¸ºå°å†™**ï¼Œä»¥ä¿æŒ URL çš„ä¸€è‡´æ€§å’Œè§„èŒƒæ€§ã€‚

- **è§„èŒƒåŒ–è¡Œä¸º**ï¼šæ— è®ºä½ è¾“å…¥ `MyPost`ã€`myPost` è¿˜æ˜¯ `mypost`ï¼Œæœ€ç»ˆ URL éƒ½ä¼šæ˜¯ `/post/mypost`
- **æ–‡ä»¶åå¤§å°å†™æ— å…³**ï¼šæ–‡ç« æ–‡ä»¶åå¯ä»¥ä½¿ç”¨ä»»æ„å¤§å°å†™ï¼ˆå¦‚ `MyPost.md`ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†
- **AI æ‘˜è¦å’Œç›¸ä¼¼åº¦**ï¼šç”Ÿæˆçš„ `summaries.json` å’Œ `similarities.json` ä¸­çš„ key ä¹Ÿä¼šç»Ÿä¸€ä¸ºå°å†™
- **æœ€ä½³å®è·µ**ï¼šå»ºè®®ç›´æ¥ä½¿ç”¨å°å†™å’Œè¿å­—ç¬¦ï¼ˆå¦‚ `my-awesome-post`ï¼‰ï¼Œé¿å…æ··æ·†

```yaml
# âœ… æ¨èå†™æ³•
link: my-awesome-post  # URL: /post/my-awesome-post

# âš ï¸ ä¼šè¢«è½¬ä¸ºå°å†™
link: MyAwesomePost    # URL: /post/myawesomepostï¼ˆä¸æ˜¯ /post/MyAwesomePostï¼‰
link: My-Awesome-Post  # URL: /post/my-awesome-post
```

å¦‚æœçœç•¥ `link` å­—æ®µï¼Œç³»ç»Ÿä¼šä½¿ç”¨æ–‡ä»¶åï¼ˆåŒæ ·ä¼šè½¬ä¸ºå°å†™ï¼‰ï¼š

```yaml
# æ–‡ä»¶: src/content/blog/MyPost.md
# çœç•¥ link å­—æ®µ â†’ URL: /post/mypost
```

### åˆ†ç±»ç³»ç»Ÿ

astro-koharu æ”¯æŒçµæ´»çš„åˆ†ç±»é…ç½®ï¼š

**å•å±‚åˆ†ç±»ï¼š**

```yaml
categories:
  - å·¥å…· # æˆ–è€… ['å·¥å…·']
```

å¯¹åº” URL: `/categories/tools`ï¼ˆæ ¹æ® `categoryMap` æ˜ å°„ï¼‰

**å¤šå±‚åµŒå¥—åˆ†ç±»ï¼š**

```yaml
categories:
  - [ç¬”è®°, å‰ç«¯, React]
```

è¿™ä¼šåˆ›å»ºå±‚çº§å…³ç³»ï¼šç¬”è®° â†’ å‰ç«¯ â†’ React

å¯¹åº” URL: `/categories/note/front-end/react`

### æ ‡ç­¾ç³»ç»Ÿ

æ ‡ç­¾æ˜¯æ‰å¹³çš„ï¼Œä¸æ”¯æŒå±‚çº§ï¼š

```yaml
tags:
  - JavaScript
  - TypeScript
  - å­¦ä¹ ç¬”è®°
```

æ‰€æœ‰æ ‡ç­¾ä¼šåœ¨ `/tags` é¡µé¢å±•ç¤ºï¼Œç‚¹å‡»æ ‡ç­¾å¯æŸ¥çœ‹è¯¥æ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡ç« ã€‚

### è‰ç¨¿åŠŸèƒ½

è®¾ç½® `draft: true` å°†æ–‡ç« æ ‡è®°ä¸ºè‰ç¨¿ï¼š

```yaml
---
title: æœªå®Œæˆçš„æ–‡ç« 
draft: true
---
```

**è¡Œä¸ºï¼š**

- **æœ¬åœ°å¼€å‘** (`pnpm dev`)ï¼šè‰ç¨¿å¯è§ï¼Œæ–‡ç« å¡ç‰‡å³ä¸Šè§’æ˜¾ç¤º "DRAFT" æ ‡è¯†
- **ç”Ÿäº§æ„å»º** (`pnpm build`)ï¼šè‰ç¨¿è‡ªåŠ¨è¿‡æ»¤ï¼Œä¸ä¼šå‡ºç°åœ¨ä»»ä½•åˆ—è¡¨ä¸­

### ç½®é¡¶åŠŸèƒ½

è®¾ç½® `sticky: true` å°†æ–‡ç« ç½®é¡¶ï¼š

```yaml
---
title: é‡è¦å…¬å‘Š
sticky: true
---
```

**è¡Œä¸ºï¼š**

- ç½®é¡¶æ–‡ç« æ˜¾ç¤ºåœ¨é¦–é¡µ "ç½®é¡¶æ–‡ç« " åŒºåŸŸ
- ç½®é¡¶æ–‡ç« æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
- ä¸å½±å“å…¶ä»–é¡µé¢ï¼ˆåˆ†ç±»ã€æ ‡ç­¾ã€å½’æ¡£ï¼‰çš„æ’åº

### ç³»åˆ—æ–‡ç« 

é…ç½®äº† `featuredSeries` çš„ç³»åˆ—ï¼ˆè§åŸºæœ¬é…ç½®ï¼‰ï¼Œå…¶åˆ†ç±»ä¸‹çš„æ–‡ç« ä¼šï¼š

1. æ‹¥æœ‰ä¸“å±çš„ç³»åˆ—é¡µé¢ï¼ˆURL ç”± `slug` å†³å®šï¼Œå¦‚ `/weekly`ã€`/reading`ï¼‰
2. ä¸å‡ºç°åœ¨æ™®é€šæ–‡ç« åˆ—è¡¨ï¼ˆ`/posts`ï¼‰ä¸­
3. å¦‚æœç³»åˆ—è®¾ç½®äº† `highlightOnHome: true`ï¼Œæœ€æ–°ä¸€ç¯‡ä¼šåœ¨é¦–é¡µé«˜äº®æ˜¾ç¤º

**ç¤ºä¾‹ï¼š**

```yaml
---
title: FE Bits Vol.16
categories:
  - å‘¨åˆŠ # å¯¹åº”æŸä¸ª featuredSeries çš„ categoryName
excludeFromSummary: true # å¯é€‰ï¼šæ’é™¤ AI æ‘˜è¦ç”Ÿæˆ
---
```

```yaml
---
title: ã€Šä»£ç å¤§å…¨ã€‹è¯»ä¹¦ç¬”è®°
categories:
  - ä¹¦æ‘˜ # å¯¹åº”å¦ä¸€ä¸ª featuredSeries çš„ categoryName
---
```

> **æç¤º**ï¼šæ–‡ç« çš„ `categories` å­—æ®µéœ€è¦ä¸ `featuredSeries` ä¸­æŸä¸ªç³»åˆ—çš„ `categoryName` åŒ¹é…æ‰ä¼šè¢«å½’å…¥è¯¥ç³»åˆ—ã€‚

### ç‹¬ç«‹é¡µé¢

é™¤äº†åšå®¢æ–‡ç« å¤–ï¼Œä½ å¯ä»¥åœ¨ `src/pages/` ç›®å½•ä¸‹åˆ›å»º `.md` æ–‡ä»¶æ¥æ·»åŠ ç‹¬ç«‹é¡µé¢ï¼ˆå¦‚"å…³äº"ã€"æ­Œå•"ç­‰ï¼‰ã€‚è¿™äº›é¡µé¢ä½¿ç”¨ `PageLayout.astro` å¸ƒå±€ï¼Œæ”¯æŒå®Œæ•´çš„ Markdown å¢å¼ºè¯­æ³•ã€‚

**åˆ›å»ºç‹¬ç«‹é¡µé¢ï¼š**

åœ¨ `src/pages/` ç›®å½•ä¸‹æ–°å»º `.md` æ–‡ä»¶ï¼š

```markdown
---
layout: ../layouts/PageLayout.astro
title: "æ­Œå•"
description: "æˆ‘å–œæ¬¢çš„éŸ³ä¹"
coverTitle: "æˆ‘çš„æ­Œå•"
comments: false
---

é¡µé¢å†…å®¹...
```

**Frontmatter å­—æ®µï¼š**

| å­—æ®µ          | å¿…å¡« | è¯´æ˜                                          |
| ------------- | ---- | --------------------------------------------- |
| `layout`      | âœ…   | å›ºå®šä¸º `../layouts/PageLayout.astro`          |
| `title`       | âœ…   | é¡µé¢æ ‡é¢˜ï¼ˆç”¨äºæµè§ˆå™¨æ ‡ç­¾é¡µï¼‰                  |
| `description` | âŒ   | é¡µé¢æè¿°ï¼ˆç”¨äº SEOï¼‰                          |
| `coverTitle`  | âŒ   | å°é¢æ˜¾ç¤ºçš„æ ‡é¢˜ï¼ˆé»˜è®¤ä½¿ç”¨ `title`ï¼‰            |
| `comments`    | âŒ   | æ˜¯å¦æ˜¾ç¤ºè¯„è®ºåŒºï¼ˆé»˜è®¤ `true`ï¼‰                 |

**æ·»åŠ å¯¼èˆªå…¥å£ï¼š**

åœ¨ `config/site.yaml` çš„ `navigation` ä¸­æ·»åŠ å¯¹åº”èœå•é¡¹ï¼š

```yaml
navigation:
  # ...
  - name: æ­Œå•
    path: /music
    icon: ri:music-2-fill
```

> **æç¤º**ï¼š`src/pages/` ä¸‹æ‰€æœ‰ `.md` æ–‡ä»¶ä¼šè¢« Koharu CLI çš„å¤‡ä»½åŠŸèƒ½è‡ªåŠ¨è¦†ç›–ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

## ç•Œé¢åŠŸèƒ½

### ä¸»é¢˜åˆ‡æ¢

ç‚¹å‡»å³ä¸Šè§’çš„å¤ªé˜³/æœˆäº®å›¾æ ‡åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼ã€‚

**ä»£ç é«˜äº®ï¼š**

- æµ…è‰²æ¨¡å¼ï¼š`github-light`
- æ·±è‰²æ¨¡å¼ï¼š`github-dark`

### å…¨ç«™æœç´¢

åŸºäº [Pagefind](https://pagefind.app/) çš„é™æ€ç«™ç‚¹æœç´¢ï¼Œæ— éœ€åç«¯æœåŠ¡å™¨ã€‚

**æ‰“å¼€æœç´¢ï¼š**

- ç‚¹å‡»å¯¼èˆªæ æœç´¢å›¾æ ‡
- å¿«æ·é”®ï¼š`Cmd/Ctrl + K`

**ç‰¹æ€§ï¼š**

- æ”¯æŒä¸­æ–‡åˆ†è¯
- å®æ—¶æœç´¢ç»“æœ
- é«˜äº®åŒ¹é…å…³é”®è¯
- æ˜¾ç¤ºæ–‡ç« æ‘˜è¦å’Œå…ƒä¿¡æ¯

### æ–‡ç« é˜…è¯»åŠŸèƒ½

**ç›®å½•å¯¼èˆª (Table of Contents)ï¼š**

- è‡ªåŠ¨æå–æ–‡ç« æ ‡é¢˜ï¼ˆh2-h6ï¼‰ç”Ÿæˆç›®å½•
- ä½¿ç”¨ CSS è®¡æ•°å™¨è‡ªåŠ¨ä¸ºæ ‡é¢˜æ·»åŠ å±‚çº§ç¼–å·ï¼ˆå¦‚ 1., 1.1., 1.1.1.ï¼‰
- æ”¯æŒé€šè¿‡ frontmatter çš„ `tocNumbering: false` å­—æ®µå…³é—­ç¼–å·æ˜¾ç¤º
- ç‚¹å‡»ç›®å½•é¡¹è·³è½¬åˆ°å¯¹åº”ç« èŠ‚
- æ»šåŠ¨æ—¶è‡ªåŠ¨é«˜äº®å½“å‰ç« èŠ‚
- æ¡Œé¢ç«¯æ˜¾ç¤ºåœ¨å³ä¾§è¾¹æ ï¼Œç§»åŠ¨ç«¯æŠ˜å 

**ç›®å½•ç¼–å·æ§åˆ¶ï¼š**

```yaml
---
title: æˆ‘çš„æ–‡ç« 
tocNumbering: false # å…³é—­ç›®å½•ç¼–å·ï¼ˆé»˜è®¤ä¸º trueï¼‰
---
```

- é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ–‡ç« çš„ç›®å½•éƒ½ä¼šæ˜¾ç¤ºå±‚çº§ç¼–å·
- è®¾ç½® `tocNumbering: false` å¯ä»¥å…³é—­ç‰¹å®šæ–‡ç« çš„ç¼–å·æ˜¾ç¤º
- ç¼–å·é€šè¿‡ CSS è®¡æ•°å™¨å®ç°ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
- åŒæ—¶é€‚ç”¨äºæ¡Œé¢ç«¯ä¾§è¾¹æ å’Œç§»åŠ¨ç«¯ä¸‹æ‹‰ç›®å½•

**é˜…è¯»è¿›åº¦æ¡ï¼š**

- é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºé˜…è¯»è¿›åº¦
- å®æ—¶æ›´æ–°å½“å‰é˜…è¯»ä½ç½®

**æ ‡é¢˜é”šç‚¹é“¾æ¥ï¼š**

- æ¯ä¸ªæ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆ ID
- æ‚¬åœæ ‡é¢˜æ—¶æ˜¾ç¤º `#` é“¾æ¥å›¾æ ‡
- ç‚¹å‡»å¯å¤åˆ¶å¸¦é”šç‚¹çš„ URL

**ç³»åˆ—æ–‡ç« å¯¼èˆªï¼š**

æ–‡ç« åº•éƒ¨æ˜¾ç¤ºåŒç³»åˆ—çš„ä¸Šä¸€ç¯‡/ä¸‹ä¸€ç¯‡ï¼š

- åŸºäºæœ€æ·±å±‚åˆ†ç±»è‡ªåŠ¨åˆ†ç»„
- æŒ‰å‘å¸ƒæ—¥æœŸæ’åº
- æ˜¾ç¤ºæ–‡ç« æ ‡é¢˜å’Œå°é¢

**é˜…è¯»æ—¶é—´ä¼°ç®—ï¼š**

æ–‡ç« å¡ç‰‡æ˜¾ç¤ºé¢„è®¡é˜…è¯»æ—¶é—´ï¼ˆåŸºäºå­—æ•°è®¡ç®—ï¼‰ã€‚

**ç§»åŠ¨ç«¯æ–‡ç« é˜…è¯»å¤´éƒ¨ï¼š**

åœ¨ç§»åŠ¨ç«¯ï¼ˆâ‰¤992pxï¼‰æµè§ˆæ–‡ç« æ—¶ï¼Œé¡¶éƒ¨å¯¼èˆªæ ä¼šæ˜¾ç¤ºä¸“ä¸ºé˜…è¯»ä¼˜åŒ–çš„å¤´éƒ¨ï¼š

- **åœ†å½¢é˜…è¯»è¿›åº¦** - å®æ—¶æ˜¾ç¤ºå½“å‰é˜…è¯»è¿›åº¦çš„åœ†å½¢è¿›åº¦æ¡
- **å½“å‰ç« èŠ‚æ ‡é¢˜** - æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ H2/H3 ç« èŠ‚æ ‡é¢˜ï¼Œåˆ‡æ¢æ—¶å¸¦æœ‰å¹³æ»‘åŠ¨ç”»
- **å¯å±•å¼€ç›®å½•** - ç‚¹å‡»æ ‡é¢˜åŒºåŸŸå¯å±•å¼€å®Œæ•´çš„æ–‡ç« ç›®å½•ï¼Œå¿«é€Ÿè·³è½¬åˆ°ä»»æ„ç« èŠ‚

ç‰¹æ€§ï¼š

- æ»šåŠ¨æ—¶è‡ªåŠ¨æ›´æ–°å½“å‰ç« èŠ‚
- æ”¯æŒ `prefers-reduced-motion` å‡å°‘åŠ¨ç”»

### å“åº”å¼è®¾è®¡

**æ¡Œé¢ç«¯ï¼š**

- åŒæ å¸ƒå±€ï¼ˆä¸»å†…å®¹ + ä¾§è¾¹æ ï¼‰
- å›ºå®šå¯¼èˆªæ 
- æ‚¬æµ®ç›®å½•

**å¹³æ¿ï¼š**

- è‡ªé€‚åº”å¸ƒå±€è°ƒæ•´
- ç®€åŒ–ä¾§è¾¹æ 

**ç§»åŠ¨ç«¯ï¼š**

- å•æ å¸ƒå±€
- æŠ½å±‰å¼å¯¼èˆªèœå•ï¼ˆæ±‰å ¡èœå•ï¼‰
- æŠ˜å å¼ç›®å½•
- è§¦æ‘¸ä¼˜åŒ–çš„äº¤äº’
- æ–‡ç« é¡µä¸“å±é˜…è¯»å¤´éƒ¨ï¼ˆè¿›åº¦åœˆ + å½“å‰æ ‡é¢˜ + å¯å±•å¼€ç›®å½•ï¼‰

## ç‰¹è‰²åŠŸèƒ½

### ç³»åˆ—æ–‡ç« ç³»ç»Ÿ

`featuredSeries` æ”¯æŒé…ç½®å¤šä¸ªç³»åˆ—ï¼Œæ¯ä¸ªç³»åˆ—ä¼šè‡ªåŠ¨ç”Ÿæˆç‹¬ç«‹é¡µé¢ï¼š

**ä¸“å±ç³»åˆ—é¡µé¢** (`/{slug}`)ï¼š

- æ¯ä¸ªå¯ç”¨çš„ç³»åˆ—éƒ½æœ‰ç‹¬ç«‹é¡µé¢ï¼ˆå¦‚ `/weekly`ã€`/reading`ï¼‰
- æ˜¾ç¤ºè¯¥ç³»åˆ—çš„æ‰€æœ‰æ–‡ç« 
- ç³»åˆ—å¤´å›¾å’Œä»‹ç»
- ç›¸å…³é“¾æ¥ï¼ˆGitHub, RSS ç­‰ï¼‰

**é¦–é¡µå±•ç¤ºï¼š**

- è®¾ç½® `highlightOnHome: true` çš„ç³»åˆ—ï¼Œå…¶æœ€æ–°æ–‡ç« ä¼šåœ¨é¦–é¡µé«˜äº®æ˜¾ç¤º
- è®¾ç½® `highlightOnHome: false` çš„ç³»åˆ—ä¸åœ¨é¦–é¡µå±•ç¤º
- æ‰€æœ‰ç³»åˆ—æ–‡ç« ç‹¬ç«‹äºæ™®é€šæ–‡ç« åˆ—è¡¨

> ğŸ’¡ **è®¾è®¡è¯´æ˜ï¼šåˆ†ç¦»å…³æ³¨ç‚¹**
>
> featuredSeries çš„è®¾è®¡åˆè¡·æ˜¯**å°†é«˜äº§å‡ºåˆ†ç±»ä»é¦–é¡µåˆ†ç¦»**ï¼Œé¿å…é¦–é¡µè¢«å•ä¸€ç±»å‹æ–‡ç« åˆ·å±ã€‚é€‚ç”¨åœºæ™¯ï¼š
>
> - **å‘¨åˆŠ/æ—¥è®°**ï¼šæ›´æ–°é¢‘ç¹ï¼Œæ•°é‡åºå¤§
> - **è¯»ä¹¦ç¬”è®°/ä¹¦æ‘˜**ï¼šç‹¬ç«‹æˆç³»åˆ—ï¼Œæ–¹ä¾¿æŒ‰ç³»åˆ—æµè§ˆ
> - **ä»»ä½•æ–‡ç« æ•°é‡è¾ƒå¤šçš„åˆ†ç±»**ï¼šå½“æŸåˆ†ç±»æ–‡ç« æ•°é‡è¿œè¶…å…¶ä»–åˆ†ç±»æ—¶
>
> **é¦–é¡µè¡Œä¸º**ï¼š
>
> - ç³»åˆ—æ–‡ç« ä»é¦–é¡µä¸»åˆ—è¡¨æ’é™¤
> - è®¾ç½® `highlightOnHome: true` æ—¶ï¼Œæœ€æ–°ä¸€ç¯‡åœ¨é¦–é¡µé¡¶éƒ¨é«˜äº®
> - å…¶ä½™æ–‡ç« é€šè¿‡ç³»åˆ—ä¸“å±é¡µé¢ï¼ˆå¦‚ `/weekly`ï¼‰è®¿é—®
>
> **å…¶ä»–é¡µé¢æ­£å¸¸å±•ç¤º**ï¼šç³»åˆ—æ–‡ç« åœ¨å½’æ¡£ã€åˆ†ç±»ã€æ ‡ç­¾ã€æœç´¢ç­‰é¡µé¢ä»ä¸æ™®é€šæ–‡ç« ä¸€èµ·æ˜¾ç¤ºï¼Œä»…é¦–é¡µä¸»åˆ—è¡¨åšäº†åˆ†ç¦»ã€‚

**é…ç½®ç¤ºä¾‹ï¼š**

```yaml
featuredSeries:
  - slug: weekly
    categoryName: å‘¨åˆŠ
    highlightOnHome: true # é¦–é¡µå±•ç¤ºæœ€æ–°å‘¨åˆŠ
    # ...
  - slug: reading
    categoryName: ä¹¦æ‘˜
    highlightOnHome: false # ä¸åœ¨é¦–é¡µå±•ç¤º
    # ...
```

### å½’æ¡£é¡µé¢

è®¿é—® `/archives` æŸ¥çœ‹æ‰€æœ‰æ–‡ç« çš„å½’æ¡£è§†å›¾ï¼š

- æŒ‰å¹´ä»½åˆ†ç»„
- æ˜¾ç¤ºæ¯å¹´çš„æ–‡ç« æ•°é‡
- æ—¶é—´çº¿å¼å±•ç¤º
- åŒ…å«æ–‡ç« å‘å¸ƒæ—¥æœŸã€æ ‡é¢˜ã€åˆ†ç±»

### å‹é“¾ç³»ç»Ÿ

è®¿é—® `/friends` æŸ¥çœ‹å‹æƒ…é“¾æ¥é¡µé¢ï¼š

**åŠŸèƒ½ï¼š**

- å‹é“¾å¡ç‰‡å±•ç¤º
- å‹é“¾ç”³è¯·è¡¨å•ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
- æ”¯æŒå¤´åƒã€åç§°ã€æè¿°ã€é“¾æ¥

### LQIPï¼ˆä½è´¨é‡å›¾ç‰‡å ä½ç¬¦ï¼‰

LQIPï¼ˆLow Quality Image Placeholderï¼‰æ˜¯ä¸€ç§å›¾ç‰‡åŠ è½½ä¼˜åŒ–æŠ€æœ¯ï¼Œåœ¨é«˜æ¸…å›¾ç‰‡åŠ è½½å®Œæˆå‰ï¼Œå…ˆæ˜¾ç¤ºä¸€ä¸ªä½è´¨é‡çš„å ä½ç¬¦ï¼Œé¿å…é¡µé¢å‡ºç°ç©ºç™½æˆ–å¸ƒå±€æŠ–åŠ¨ã€‚

**ç‰¹æ€§ï¼š**

- ğŸ¨ æ„å»ºæ—¶è‡ªåŠ¨æå–å›¾ç‰‡ä¸»è‰²è°ƒï¼Œç”Ÿæˆ CSS æ¸å˜å ä½ç¬¦
- âš¡ é›¶è¿è¡Œæ—¶å¼€é”€ â€”â€” çº¯ CSS å®ç°ï¼Œæ— éœ€ JavaScript è§£ç 
- ğŸ“¦ æå°æ•°æ®ä½“ç§¯ â€”â€” æ¯å¼ å›¾ç‰‡ä»…éœ€ 18 å­—ç¬¦å­˜å‚¨
- ğŸ”„ å¤–éƒ¨å›¾ç‰‡è‡ªåŠ¨é™çº§ä¸ºçº¯è‰²å ä½ç¬¦

**æ”¯æŒçš„ç»„ä»¶ï¼š**

- æ–‡ç« å¡ç‰‡å°é¢ (`PostItemCard`)
- é¡µé¢æ¨ªå¹… (`Cover`)
- åˆ†ç±»å¡ç‰‡èƒŒæ™¯ (`CategoryCards`)
- ç³»åˆ—å°é¢ (`SeriesCover`)
- ä¾§è¾¹æ å¤´åƒ (`HomeInfo`)

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
# ç”Ÿæˆ LQIP æ•°æ®ï¼ˆå¤„ç† public/img/ ä¸‹æ‰€æœ‰å›¾ç‰‡ï¼‰
pnpm generate:lqips
```

**ç”Ÿæˆæ•ˆæœï¼š**

LQIP æ•°æ®ä¿å­˜åœ¨ `src/assets/lqips.json`ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "cover/1.webp": "87a3c4c2dfefbddae9",
  "cover/2.webp": "6e3b38ae7472af7574"
}
```

æ¯ä¸ªå€¼æ˜¯ 18 ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ3 ä¸ªé¢œè‰²ï¼‰ï¼Œè¿è¡Œæ—¶è§£ç ä¸º CSS æ¸å˜ï¼š

```css
linear-gradient(135deg, #87a3c4 0%, #c2dfef 50%, #bddae9 100%)
```

**åŸç†ï¼š**

1. ä½¿ç”¨ sharp å°†å›¾ç‰‡ç¼©æ”¾åˆ° 2Ã—2 åƒç´ 
2. æå–å››è±¡é™çš„å¹³å‡è‰²ï¼ˆå·¦ä¸Šã€å³ä¸Šã€å·¦ä¸‹ã€å³ä¸‹ï¼‰
3. é€‰å– 3 ä¸ªé¢œè‰²ç”Ÿæˆ 135 åº¦æ–œå‘æ¸å˜
4. å­˜å‚¨ä¸ºç´§å‡‘çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²

**åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š**

```astro
---
import { getLqipStyle, getLqipProps } from '@lib/lqip';

// æ–¹å¼ 1ï¼šç›´æ¥è·å–æ ·å¼å­—ç¬¦ä¸²
const style = getLqipStyle('/img/cover/1.webp');
// è¿”å›: "background-image:linear-gradient(...)"

// æ–¹å¼ 2ï¼šè·å–å®Œæ•´çš„ propsï¼ˆæ”¯æŒå¤–éƒ¨å›¾ç‰‡é™çº§ï¼‰
const lqipProps = getLqipProps(coverUrl);
// æœ¬åœ°å›¾ç‰‡è¿”å›: { style: "background-image:..." }
// å¤–éƒ¨å›¾ç‰‡è¿”å›: { class: "lqip-fallback" }
---

<div style={style}>
  <img src="/img/cover/1.webp" />
</div>
```

**æ³¨æ„äº‹é¡¹ï¼š**

- ç”Ÿæˆçš„ `src/assets/lqips.json` éœ€è¦æäº¤åˆ° git
- æ·»åŠ æ–°å›¾ç‰‡åéœ€è¦é‡æ–°è¿è¡Œ `pnpm generate:lqips`
- å¤–éƒ¨å›¾ç‰‡ï¼ˆhttp/https å¼€å¤´ï¼‰ä¼šè‡ªåŠ¨ä½¿ç”¨çº¯è‰²å ä½ç¬¦é™çº§

### ç›¸å…³æ–‡ç« æ¨è

å‚è€ƒ [No Server, No Database: Smarter Related Posts in Astro with `transformers.js`](https://alexop.dev/posts/semantic-related-posts-astro-transformersjs/)

åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„æ™ºèƒ½æ–‡ç« æ¨èç³»ç»Ÿï¼Œä½¿ç”¨ [transformers.js](https://huggingface.co/docs/transformers.js) åœ¨æœ¬åœ°ç”Ÿæˆæ–‡ç« åµŒå…¥å‘é‡ï¼Œè®¡ç®—æ–‡ç« é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦ã€‚

**ç‰¹æ€§ï¼š**

- ğŸ§  åŸºäº AI åµŒå…¥æ¨¡å‹ï¼ˆSnowflake Arctic Embedï¼‰çš„è¯­ä¹‰ç†è§£
- ğŸ“Š è‡ªåŠ¨è®¡ç®—æ–‡ç« é—´çš„ç›¸ä¼¼åº¦ï¼Œæ¨èæœ€ç›¸å…³çš„ 5 ç¯‡æ–‡ç« 
- ğŸš€ æ„å»ºæ—¶é¢„è®¡ç®—ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€
- ğŸ”§ æ”¯æŒé€šè¿‡ frontmatter æ’é™¤ç‰¹å®šæ–‡ç« 

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
# ç”Ÿæˆç›¸ä¼¼åº¦æ•°æ®ï¼ˆæœ¬åœ°è¿è¡Œï¼Œä¼šè‡ªåŠ¨ä¸‹è½½æ¨¡å‹ï¼Œçº¦éœ€ 3-5 åˆ†é’Ÿï¼‰
pnpm generate:similarities

# ç”Ÿæˆçš„æ–‡ä»¶ä¼šæäº¤åˆ° gitï¼ŒVercel ç­‰å¹³å°ç›´æ¥ä½¿ç”¨
```

**æ’é™¤ç‰¹å®šæ–‡ç« ï¼š**

åœ¨æ–‡ç«  frontmatter ä¸­è®¾ç½® `excludeFromSummary: true` å¯æ’é™¤è¯¥æ–‡ç« ï¼š

```yaml
---
title: å‘¨åˆŠç¬¬ 1 æœŸ
excludeFromSummary: true # æ’é™¤æ­¤æ–‡ç« çš„ç›¸ä¼¼åº¦è®¡ç®—å’Œ AI æ‘˜è¦ç”Ÿæˆ
---
```

> **æç¤º**ï¼šç³»åˆ—æ–‡ç« ï¼ˆå¦‚å‘¨åˆŠï¼‰é€šå¸¸å»ºè®®è®¾ç½® `excludeFromSummary: true`ï¼Œé¿å…å½±å“å…¶ä»–æ–‡ç« çš„æ¨èè´¨é‡ã€‚

**é…ç½®è®¡ç®—å†…å®¹ï¼š**

å¯ä»¥é€‰æ‹©æ˜¯å¦å°†æ–‡ç« æ­£æ–‡çº³å…¥ç›¸ä¼¼åº¦è®¡ç®—ï¼š

```typescript
// true: ä½¿ç”¨ æ ‡é¢˜ + æè¿° + æ­£æ–‡ï¼ˆæ›´å‡†ç¡®ï¼Œé€Ÿåº¦è¾ƒæ…¢ï¼‰
// false: ä»…ä½¿ç”¨ æ ‡é¢˜ + æè¿°ï¼ˆæ›´å¿«ï¼Œé€‚åˆæ–‡ç« æ•°é‡è¾ƒå¤šçš„æƒ…å†µï¼‰
const INCLUDE_BODY = true;
```

- **åŒ…å«æ­£æ–‡**ï¼šç›¸ä¼¼åº¦æ›´ç²¾ç¡®ï¼Œèƒ½è¯†åˆ«å†…å®¹å±‚é¢çš„ç›¸å…³æ€§ï¼Œä½†ç”Ÿæˆé€Ÿåº¦è¾ƒæ…¢
- **ä»…æ ‡é¢˜+æè¿°**ï¼šç”Ÿæˆé€Ÿåº¦å¿«ï¼Œé€‚åˆæè¿°å†™å¾—æ¯”è¾ƒè¯¦ç»†çš„åšå®¢

```bash
# ä½¿ç”¨ Snowflake/snowflake-arctic-embed-m-v2.0 è®¡ç®— 168 ç¯‡æ–‡ç« ï¼ˆæ ‡é¢˜+æè¿°ï¼‰çš„æ—¶é—´
Done! Generated similarities for 168 posts in 4.1s

# ä½¿ç”¨ Snowflake/snowflake-arctic-embed-m-v2.0 è®¡ç®— 168 ç¯‡æ–‡ç« ï¼ˆæ ‡é¢˜+æè¿°+æ­£æ–‡ï¼‰çš„æ—¶é—´
Done! Generated similarities for 168 posts in 219.3s
```

è¿™å·®åˆ«æœ‰ç‚¹å¤§ï¼Œä½†æ˜¯æˆ‘ä¸ªäººå¾ˆå–œæ¬¢å¸¦æ­£æ–‡çš„ç»“æœï¼Œæ•ˆæœæ˜¾ç„¶ä¼šæ›´å¥½ã€‚æ‰€ä»¥ç´¢æ€§å†åŠ ä¸€ä¸ªè·‘ AI æ€»ç»“çš„åŠŸèƒ½ã€‚

**æ¨¡å‹é€‰æ‹©ï¼š**

é»˜è®¤ä½¿ç”¨ `Snowflake/snowflake-arctic-embed-m-v2.0` æ¨¡å‹ï¼š

- **æ¨¡å‹å¤§å°**ï¼šçº¦ 90MBï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½åˆ° `.cache/transformers` ç›®å½•ï¼‰
- **å‘é‡ç»´åº¦**ï¼š768 ç»´
- **æ€§èƒ½**ï¼šå¹³è¡¡äº†è´¨é‡å’Œé€Ÿåº¦ï¼Œé€‚åˆä¸­æ–‡å’Œè‹±æ–‡å†…å®¹
- **ç”Ÿæˆæ—¶é—´**ï¼šçº¦ 3-5 åˆ†é’Ÿï¼ˆ169 ç¯‡æ–‡ç« ï¼‰

å¦‚éœ€æ›´æ¢æ¨¡å‹ï¼Œç¼–è¾‘ `src/scripts/generateSimilarities.ts` ä¸­çš„ `MODEL_NAME`ï¼š

```typescript
const MODEL_NAME = "Snowflake/snowflake-arctic-embed-m-v2.0";
// å¯é€‰æ›¿ä»£æ–¹æ¡ˆï¼š
// const MODEL_NAME = 'sentence-transformers/all-MiniLM-L6-v2'; // æ›´å°æ›´å¿«ï¼ˆçº¦ 23MBï¼‰ï¼Œ384 ç»´
// const MODEL_NAME = 'BAAI/bge-small-zh-v1.5';  // é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–
```

**å…¶ä»–å¯é€‰æ¨¡å‹å¯¹æ¯”ï¼š**

| æ¨¡å‹                                      | å¤§å°  | ç»´åº¦ | ä¼˜åŠ¿               |
| ----------------------------------------- | ----- | ---- | ------------------ |
| `Snowflake/snowflake-arctic-embed-m-v2.0` | ~90MB | 768  | è´¨é‡é«˜ï¼Œä¸­è‹±æ–‡å‡è¡¡ |
| `sentence-transformers/all-MiniLM-L6-v2`  | ~23MB | 384  | è½»é‡å¿«é€Ÿ           |
| `BAAI/bge-small-zh-v1.5`                  | ~95MB | 512  | ä¸­æ–‡ä¸“ç”¨           |

**æ³¨æ„äº‹é¡¹ï¼š**

- éœ€è¦æœ¬åœ°è¿è¡Œç”Ÿæˆè„šæœ¬ï¼ˆVercel ç­‰å¹³å°æ— æ³•è¿è¡Œæ¨¡å‹ï¼‰
- ç”Ÿæˆçš„ `src/assets/similarities.json` éœ€è¦æäº¤åˆ° git
- å¦‚æœæ²¡æœ‰ç”Ÿæˆç›¸ä¼¼åº¦æ–‡ä»¶ï¼Œç›¸å…³æ–‡ç« æ¨¡å—ä¸ä¼šæ˜¾ç¤º
- æ¨¡å‹æ–‡ä»¶ä¼šç¼“å­˜åœ¨ `.cache/transformers` ç›®å½•ï¼ˆå·²æ·»åŠ åˆ° `.gitignore`ï¼‰

### AI è‡ªåŠ¨æ‘˜è¦

åŸºäº [transformers.js](https://huggingface.co/docs/transformers.js) çš„æ™ºèƒ½æ‘˜è¦ç”Ÿæˆç³»ç»Ÿï¼Œä½¿ç”¨å…ˆè¿›çš„ AI æ¨¡å‹ä¸ºæ–‡ç« è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡æ‘˜è¦ã€‚

**ä¸ç›¸å…³æ–‡ç« æ¨èçš„å…³ç³»ï¼š**

AI æ‘˜è¦åŠŸèƒ½ä¸ç›¸å…³æ–‡ç« æ¨èåŠŸèƒ½ç›¸è¾…ç›¸æˆï¼š

- **ç›¸ä¼¼åº¦è®¡ç®—**éœ€è¦è¯»å–æ–‡ç« å…¨æ–‡ï¼Œè®¡ç®—æˆæœ¬è¾ƒé«˜ï¼ˆçº¦ 3-5 åˆ†é’Ÿï¼‰
- **AI æ‘˜è¦**å¯ä»¥åœ¨ä¸è¯»å–å…¨æ–‡çš„æƒ…å†µä¸‹æä¾›ä¼˜è´¨æè¿°ï¼ŒåŒæ—¶ç”Ÿæˆçš„æ‘˜è¦ä¹Ÿèƒ½å¸®åŠ©æ”¹å–„ç›¸ä¼¼åº¦è®¡ç®—çš„æ•ˆæœ
- ä¸¤è€…å…±äº«ç›¸åŒçš„æ¨¡å‹ç¼“å­˜æœºåˆ¶ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´

**ç‰¹æ€§ï¼š**

- ğŸ¤– åŸºäºå…ˆè¿›çš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼ˆXenova/LaMini-Flan-T5-783Mï¼‰
- ğŸ“ è‡ªåŠ¨ä¸ºç¼ºå°‘æè¿°çš„æ–‡ç« ç”Ÿæˆæ‘˜è¦
- âœ¨ æ–‡ç« è¯¦æƒ…é¡µæ”¯æŒæ‰“å­—æœºåŠ¨ç”»å±•ç¤ºï¼Œå¢å¼ºé˜…è¯»ä½“éªŒ
- ğŸ¯ æ™ºèƒ½ fallbackï¼šä¼˜å…ˆä½¿ç”¨æ‰‹å†™ descriptionï¼Œæ— æè¿°æ—¶è‡ªåŠ¨ä½¿ç”¨ AI æ‘˜è¦
- ğŸš€ æ„å»ºæ—¶é¢„ç”Ÿæˆï¼Œè¿è¡Œæ—¶é›¶å¼€é”€
- â™¿ æ”¯æŒæ— éšœç¢è®¿é—®å’Œ prefers-reduced-motion

**ä½¿ç”¨æ–¹å¼ï¼š**

```bash
# ç”Ÿæˆ AI æ‘˜è¦ï¼ˆæœ¬åœ°è¿è¡Œï¼Œé¦–æ¬¡ä¼šä¸‹è½½æ¨¡å‹ï¼Œçº¦éœ€ 5-10 åˆ†é’Ÿï¼‰
pnpm generate:summaries

# ç”Ÿæˆçš„æ–‡ä»¶è¦æäº¤åˆ° gitï¼Œç„¶åå¯ä»¥åœ¨ Vercel ç­‰å¹³å°ç›´æ¥ä½¿ç”¨
```

**ç”Ÿæˆæ•ˆæœï¼š**

AI æ‘˜è¦ä¼šä¿å­˜åœ¨ `src/assets/summaries.json` æ–‡ä»¶ä¸­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "article-slug": {
    "title": "æ–‡ç« æ ‡é¢˜",
    "summary": "AI ç”Ÿæˆçš„æ‘˜è¦å†…å®¹..."
  }
}
```

**åœ¨å“ªé‡Œä½¿ç”¨ï¼š**

1. **æ–‡ç« è¯¦æƒ…é¡µ**ï¼šé¢åŒ…å±‘å¯¼èˆªä¸‹æ–¹æ˜¾ç¤ºå¯æŠ˜å çš„ AI æ‘˜è¦å¡ç‰‡

   - é»˜è®¤æ”¶èµ·çŠ¶æ€ï¼Œç‚¹å‡»"å±•å¼€"æŒ‰é’®è§¦å‘
   - å±•å¼€åä»¥æ‰“å­—æœºåŠ¨ç”»é€å­—æ˜¾ç¤ºæ‘˜è¦å†…å®¹
   - æ‰“å­—æœºåŠ¨ç”»ä»…æ’­æ”¾ä¸€æ¬¡ï¼Œæ”¯æŒ `prefers-reduced-motion` ç”¨æˆ·åå¥½

2. **æ–‡ç« å¡ç‰‡**ï¼šä½œä¸ºæè¿°çš„ fallback
   - ä¼˜å…ˆçº§ï¼šæ‰‹å†™ `description` > AI æ‘˜è¦ > Markdown å‰ 150 å­—
   - åœ¨æ–‡ç« åˆ—è¡¨ã€é¦–é¡µã€åˆ†ç±»é¡µç­‰å¤„è‡ªåŠ¨ä½¿ç”¨

**æ¨¡å‹é€‰æ‹©ï¼š**

é»˜è®¤ä½¿ç”¨ `Xenova/LaMini-Flan-T5-783M` æ¨¡å‹ï¼š

- **æ¨¡å‹å¤§å°**ï¼šçº¦ 300MBï¼ˆé¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨ä¸‹è½½åˆ° `.cache/transformers` ç›®å½•ï¼‰
- **ç”Ÿæˆè´¨é‡**ï¼šé«˜è´¨é‡çš„ä¸­è‹±æ–‡æ‘˜è¦ç”Ÿæˆ
- **ç”Ÿæˆæ—¶é—´**ï¼šçº¦ 5-10 åˆ†é’Ÿï¼ˆ169 ç¯‡æ–‡ç« ï¼‰

å¦‚éœ€æ›´æ¢æ¨¡å‹ï¼Œç¼–è¾‘ `src/scripts/generateSummaries.ts` ä¸­çš„ `MODEL_NAME`ï¼š

```typescript
const MODEL_NAME = "Xenova/LaMini-Flan-T5-783M";
// å¯é€‰æ›¿ä»£æ–¹æ¡ˆï¼š
// const MODEL_NAME = 'Xenova/distilbart-cnn-6-6'; // æ›´å¿«ï¼Œè‹±æ–‡æ•ˆæœå¥½
// const MODEL_NAME = 'facebook/bart-large-cnn';   // è´¨é‡æ›´é«˜ï¼Œä½†é€Ÿåº¦è¾ƒæ…¢
```

**é…ç½®æç¤ºè¯ï¼š**

å¯ä»¥è‡ªå®šä¹‰ç”Ÿæˆæ‘˜è¦çš„æç¤ºè¯ï¼Œç¼–è¾‘ `src/scripts/generateSummaries.ts` ä¸­çš„ `PROMPT_TEMPLATE`ï¼š

```typescript
const PROMPT_TEMPLATE = (title: string, content: string) =>
  `è¯·ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆä¸€æ®µç®€æ´çš„æ‘˜è¦ï¼ˆ100-150å­—ï¼‰ï¼š\n\næ ‡é¢˜ï¼š${title}\n\nå†…å®¹ï¼š${content}`;
```

**æ³¨æ„äº‹é¡¹ï¼š**

- éœ€è¦æœ¬åœ°è¿è¡Œç”Ÿæˆè„šæœ¬ï¼ˆVercel ç­‰å¹³å°æ— æ³•è¿è¡Œå¤§æ¨¡å‹ï¼‰
- ç”Ÿæˆçš„ `src/assets/summaries.json` éœ€è¦æäº¤åˆ° git
- å¦‚æœæ²¡æœ‰ç”Ÿæˆæ‘˜è¦æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨ fallback åˆ° Markdown æ–‡æœ¬æå–
- æ¨¡å‹æ–‡ä»¶ä¼šç¼“å­˜åœ¨ `.cache/transformers` ç›®å½•ï¼ˆå·²æ·»åŠ åˆ° `.gitignore`ï¼‰
- é¦–æ¬¡è¿è¡Œéœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œå»ºè®®åœ¨ç½‘ç»œè‰¯å¥½çš„ç¯å¢ƒä¸‹è¿›è¡Œ

**æœ€ä½³å®è·µï¼š**

1. **ä¸ç›¸ä¼¼åº¦è®¡ç®—é…åˆä½¿ç”¨**ï¼š

   ```bash
   # å…ˆç”Ÿæˆæ‘˜è¦
   pnpm generate:summaries
   # å†è®¡ç®—ç›¸ä¼¼åº¦ï¼ˆå¯ä»¥ä½¿ç”¨æ‘˜è¦ä»£æ›¿å…¨æ–‡ï¼Œæå‡é€Ÿåº¦ï¼‰
   pnpm generate:similarities
   ```

2. **é€‰æ‹©æ€§ç”Ÿæˆæ‘˜è¦**ï¼šä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œè„šæœ¬ä¼šè·³è¿‡å·²æœ‰ `description` çš„æ–‡ç« 

3. **æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶**ï¼šå°†ç”Ÿæˆçš„ JSON æ–‡ä»¶æäº¤åˆ° gitï¼Œé¿å…åœ¨ CI/CD ç¯å¢ƒé‡å¤ç”Ÿæˆ

### åœ£è¯ç‰¹è¾‘

èŠ‚æ—¥é™å®šçš„åœ£è¯æ°›å›´ç‰¹æ•ˆç³»ç»Ÿï¼ŒåŒ…å«å¤šç§å¯ç‹¬ç«‹å¼€å…³çš„è§†è§‰æ•ˆæœï¼Œä¸ºåšå®¢å¢æ·»èŠ‚æ—¥æ°”æ°›ã€‚

**ç‰¹æ€§ï¼š**

- é›ªèŠ±é£˜è½ â€”â€” Canvas å®ç°çš„é›ªèŠ±åŠ¨ç”»ï¼Œåˆ†å‰æ™¯å’ŒèƒŒæ™¯ä¸¤å±‚ï¼Œæ”¯æŒè§†å·®æ•ˆæœ
- åœ£è¯é…è‰² â€”â€” çº¢ç»¿é‡‘ä¸»é¢˜è‰²æ›¿æ¢é»˜è®¤ç²‰è“é…è‰²ï¼Œæ”¯æŒæ·±è‰²/æµ…è‰²æ¨¡å¼
- åœ£è¯å¸½è£…é¥° â€”â€” ä¾§è¾¹æ å¤´åƒä¸Šçš„åœ£è¯å¸½
- åœ£è¯ç¯ä¸² â€”â€” Header é¡¶éƒ¨çš„è£…é¥°ç¯ä¸²åŠ¨ç”»
- åœ£è¯é¥°å“åˆ‡æ¢ â€”â€” å¯¼èˆªæ çš„è£…é¥°é¥°å“
- è¿è¡Œæ—¶å¼€å…³ â€”â€” å³ä¸‹è§’æµ®åŠ¨æŒ‰é’®å¯éšæ—¶åˆ‡æ¢ç‰¹æ•ˆï¼Œè®¾ç½®è‡ªåŠ¨ä¿å­˜

**é…ç½®æ–¹å¼ï¼š**

ç¼–è¾‘ `config/site.yaml` ä¸­çš„ `christmas` é…ç½®ï¼š

```yaml
christmas:
  enabled: true # æ€»å¼€å…³
  features:
    snowfall: true # é›ªèŠ±é£˜è½
    christmasColorScheme: true # åœ£è¯é…è‰²
    christmasCoverDecoration: true # ç¯ä¸²è£…é¥°
    christmasHat: true # åœ£è¯å¸½
    readingTimeSnow: true # é˜…è¯»æ—¶é—´é›ªèŠ±ç‰¹æ•ˆ
  snowfall:
    speed: 0.5 # é£˜è½é€Ÿåº¦ï¼ˆé»˜è®¤ 0.5ï¼‰
    intensity: 0.7 # æ¡Œé¢ç«¯é›ªèŠ±å¯†åº¦ï¼ˆ0-1ï¼‰
    mobileIntensity: 0.4 # ç§»åŠ¨ç«¯é›ªèŠ±å¯†åº¦ï¼ˆ0-1ï¼‰
    maxLayers: 6 # æœ€å¤§é›ªèŠ±å±‚æ•°
    maxIterations: 8 # æœ€å¤§è¿­ä»£æ¬¡æ•°
    mobileMaxLayers: 4 # ç§»åŠ¨ç«¯æœ€å¤§å±‚æ•°
    mobileMaxIterations: 6 # ç§»åŠ¨ç«¯æœ€å¤§è¿­ä»£æ¬¡æ•°
```

**ç”¨æˆ·æ§åˆ¶ï¼š**

- é¡µé¢å³ä¸‹è§’æ‚¬æµ®æŒ‰é’®ï¼ˆé›ªèŠ±å›¾æ ‡ï¼‰å¯åˆ‡æ¢åœ£è¯ç‰¹æ•ˆå¼€å…³
- ç”¨æˆ·åå¥½è‡ªåŠ¨ä¿å­˜åˆ° localStorageï¼Œè·¨ä¼šè¯ä¿æŒ
- æ”¯æŒ `prefers-reduced-motion` åå¥½ï¼Œè‡ªåŠ¨ç¦ç”¨åŠ¨ç”»

**æŠ€æœ¯å®ç°ï¼š**

- é›ªèŠ±ä½¿ç”¨ Canvas 2D æ¸²æŸ“ï¼Œåˆ†å±‚å®ç°è§†å·®æ•ˆæœ
- é…è‰²é€šè¿‡ CSS å˜é‡è¦†ç›–ï¼Œé›¶è¿è¡Œæ—¶å¼€é”€
- çŠ¶æ€ç®¡ç†ä½¿ç”¨ nanostoresï¼Œæ”¯æŒè·¨ç»„ä»¶åŒæ­¥
- å®Œå…¨å“åº”å¼ï¼Œç§»åŠ¨ç«¯è‡ªåŠ¨é™ä½é›ªèŠ±å¯†åº¦

**å…³é—­åœ£è¯ç‰¹æ•ˆï¼š**

è®¾ç½® `christmasConfig.enabled = false` å³å¯å®Œå…¨å…³é—­æ‰€æœ‰åœ£è¯ç‰¹æ•ˆã€‚

### ç«™ç‚¹å…¬å‘Šç³»ç»Ÿ

æ— åç«¯çš„ç«™ç‚¹å…¬å‘Šç³»ç»Ÿï¼Œæ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­ç®¡ç†å…¬å‘Šï¼Œé¦–æ¬¡è®¿é—®è‡ªåŠ¨å¼¹å‡ºï¼Œå…³é—­åå¯é€šè¿‡é¡µè„šå…¥å£å†æ¬¡æŸ¥çœ‹ã€‚

**ç‰¹æ€§ï¼š**

- æ— åç«¯ â€”â€” å…¬å‘Šå†…å®¹å†™åœ¨é…ç½®æ–‡ä»¶ï¼Œæ— éœ€æ•°æ®åº“
- Toast é€šçŸ¥ â€”â€” å³ä¸‹è§’æµ®åŠ¨é€šçŸ¥ï¼Œæ”¯æŒå¤šæ¡å †å æ˜¾ç¤º
- å¤šæ¡å…¬å‘Š â€”â€” æ”¯æŒé…ç½®å¤šæ¡å…¬å‘Šï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åº
- æ—¶é—´æ§åˆ¶ â€”â€” æ”¯æŒè®¾ç½®å…¬å‘Šçš„å¼€å§‹/ç»“æŸæ—¥æœŸï¼Œè‡ªåŠ¨æ§åˆ¶æ˜¾ç¤º
- è‡ªå®šä¹‰é¢œè‰² â€”â€” æ¯æ¡å…¬å‘Šå¯è®¾ç½®ç‹¬ç«‹é¢œè‰²ï¼Œè¦†ç›–é»˜è®¤ç±»å‹é¢œè‰²
- æ—¶é—´çº¿å¼¹çª— â€”â€” å…¬å‘Šåˆ—è¡¨é‡‡ç”¨æ—¶é—´çº¿æ ·å¼ï¼Œå¸¦æ¸å˜è¿æ¥çº¿
- Hover å·²è¯» â€”â€” æ‚¬åœ Toast 1 ç§’åè‡ªåŠ¨æ ‡è®°å·²è¯»
- å·²è¯»è¿½è¸ª â€”â€” localStorage è®°å½•å·²è¯»çŠ¶æ€ï¼Œè¿”å›è®¿é—®ä¸é‡å¤å¼¹å‡º
- å†æ¬¡æŸ¥çœ‹ â€”â€” é¡µè„šå…¥å£å¯éšæ—¶æŸ¥çœ‹æ‰€æœ‰å…¬å‘Šï¼Œå¸¦æœªè¯»çº¢ç‚¹æç¤º

**é…ç½®æ–¹å¼ï¼š**

ç¼–è¾‘ `config/site.yaml` æ·»åŠ å…¬å‘Šï¼š

```yaml
announcements:
  - id: welcome-2026 # å”¯ä¸€æ ‡è¯†
    title: 2026 å¹´æ–°å¹´å¿«ä¹! # å…¬å‘Šæ ‡é¢˜
    content: æ–°å¹´å¿«ä¹! æ„Ÿè°¢å¤§å®¶ä¸€ç›´ä»¥æ¥çš„æ”¯æŒ~ # å…¬å‘Šå†…å®¹
    type: info # ç±»å‹ï¼šinfo | warning | success | important
    priority: 300 # ä¼˜å…ˆçº§ï¼ˆè¶Šé«˜è¶Šå…ˆæ˜¾ç¤ºï¼‰
    color: "#ED788C" # è‡ªå®šä¹‰é¢œè‰²ï¼ˆå¯é€‰ï¼Œè¦†ç›– type é»˜è®¤è‰²ï¼‰
    publishDate: "2026-01-01" # æ˜¾ç¤ºæ—¥æœŸï¼ˆå¯é€‰ï¼Œç”¨äºæ—¶é—´çº¿å±•ç¤ºï¼‰
    startDate: "2025-12-31T00:00:00+08:00" # å¼€å§‹æ—¥æœŸï¼ˆå¯é€‰ï¼‰
    endDate: "2026-01-15T23:59:59+08:00" # ç»“æŸæ—¥æœŸï¼ˆå¯é€‰ï¼‰
  - id: site-update-01
    title: ç«™ç‚¹æ›´æ–°å…¬å‘Š
    content: æ–°å¢ç«™ç‚¹å…¬å‘Šç³»ç»Ÿï¼Œç°åœ¨æ”¯æŒå¤šæ¡å…¬å‘ŠåŒæ—¶æ˜¾ç¤ºï¼
    type: info
    priority: 500
    color: "#6366F1"
    publishDate: "2025-01-02"
```

å¦‚æœéœ€è¦æ·»åŠ é“¾æ¥ï¼ˆå¯é€‰ï¼‰ï¼š

```yaml
announcements:
  - id: example-with-link
    title: ç¤ºä¾‹å…¬å‘Š
    content: å…¬å‘Šå†…å®¹
    type: info
    link:
      url: https://example.com
      text: äº†è§£æ›´å¤š
      external: true
```

**å…¬å‘Šç±»å‹æ ·å¼ï¼š**

| ç±»å‹        | è¯´æ˜     | é»˜è®¤é¢œè‰²       |
| ----------- | -------- | -------------- |
| `info`      | ä¿¡æ¯é€šçŸ¥ | è“è‰² (#3b82f6) |
| `warning`   | è­¦å‘Šæç¤º | é»„è‰² (#eab308) |
| `success`   | æˆåŠŸæ¶ˆæ¯ | ç»¿è‰² (#22c55e) |
| `important` | é‡è¦å…¬å‘Š | çº¢è‰² (#ef4444) |

> è®¾ç½® `color` å­—æ®µå¯è¦†ç›–ä¸Šè¿°é»˜è®¤é¢œè‰²

**äº¤äº’æµç¨‹ï¼š**

1. **é¦–æ¬¡è®¿é—®**ï¼š0.5 ç§’åè‡ªåŠ¨å¼¹å‡ºæœªè¯»å…¬å‘Š Toastï¼ˆå¤šæ¡å †å æ˜¾ç¤ºï¼‰
2. **Hover å·²è¯»**ï¼šæ‚¬åœåœ¨ Toast ä¸Š 1 ç§’åè‡ªåŠ¨æ ‡è®°å·²è¯»
3. **æ‰‹åŠ¨å…³é—­**ï¼šç‚¹å‡» Dismiss å…³é—­ Toast
4. **ç‚¹å‡»"View all"**ï¼šå…³é—­æ‰€æœ‰ Toastï¼Œæ‰“å¼€æ—¶é—´çº¿å¼¹çª—
5. **æ—¶é—´çº¿å¼¹çª—**ï¼šç‚¹å‡»å…¬å‘Šå¡ç‰‡æ ‡è®°å·²è¯»ï¼Œæ˜¾ç¤ºå‘å¸ƒæ—¥æœŸå’Œæ¸å˜è¿æ¥çº¿
6. **é¡µè„šå…¥å£**ï¼šéšæ—¶å¯ç‚¹å‡»æŸ¥çœ‹æ‰€æœ‰å…¬å‘Šï¼Œæœªè¯»æ—¶æ˜¾ç¤ºçº¢ç‚¹
7. **è¿”å›è®¿é—®**ï¼šåªæ˜¾ç¤ºçœŸæ­£æœªè¯»çš„å…¬å‘Š

**æ³¨æ„äº‹é¡¹ï¼š**

- å…¬å‘Š `id` å¿…é¡»å”¯ä¸€ï¼Œç”¨äºè¿½è¸ªå·²è¯»çŠ¶æ€
- çœç•¥ `startDate` è¡¨ç¤ºç«‹å³ç”Ÿæ•ˆï¼Œçœç•¥ `endDate` è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
- `publishDate` ç”¨äºæ—¶é—´çº¿å¼¹çª—ä¸­çš„æ—¥æœŸæ˜¾ç¤ºï¼Œçœç•¥æ—¶ä½¿ç”¨ `startDate`
- è¿‡æœŸå…¬å‘Šå»ºè®®ä»é…ç½®ä¸­åˆ é™¤ï¼Œä¿æŒé…ç½®ç®€æ´
- å·²è¯»çŠ¶æ€å­˜å‚¨åœ¨ localStorageï¼Œkey ä¸º `announcement-read-ids`

### Markdown å¢å¼º

**è¯­æ³•æ”¯æŒï¼š**

- GitHub Flavored Markdown (GFM)
  - è¡¨æ ¼
  - ä»»åŠ¡åˆ—è¡¨
  - åˆ é™¤çº¿
  - è‡ªåŠ¨é“¾æ¥

**Mermaid å›¾è¡¨ï¼š**

æ”¯æŒåœ¨ Markdown ä¸­ä½¿ç”¨ Mermaid è¯­æ³•ç»˜åˆ¶æµç¨‹å›¾ã€æ—¶åºå›¾ã€æ¶æ„å›¾ç­‰ã€‚

````markdown
```mermaid
flowchart LR
    A[æ„å»ºæ—¶è„šæœ¬] --> B[JSON æ•°æ®æ–‡ä»¶] --> C[è¿è¡Œæ—¶å·¥å…·å‡½æ•°]
```
````

```mermaid
flowchart LR
    A[æ„å»ºæ—¶è„šæœ¬] --> B[JSON æ•°æ®æ–‡ä»¶] --> C[è¿è¡Œæ—¶å·¥å…·å‡½æ•°]
```

æ”¯æŒçš„å›¾è¡¨ç±»å‹ï¼š

- `flowchart` / `graph` - æµç¨‹å›¾
- `sequenceDiagram` - æ—¶åºå›¾
- `classDiagram` - ç±»å›¾
- `stateDiagram` - çŠ¶æ€å›¾
- `erDiagram` - ER å›¾
- `gantt` - ç”˜ç‰¹å›¾
- `pie` - é¥¼å›¾
- `mindmap` - æ€ç»´å¯¼å›¾

å›¾è¡¨ä¼šè‡ªåŠ¨è·Ÿéšæ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢ã€‚æ›´å¤šè¯­æ³•å‚è€ƒ [Mermaid å®˜æ–¹æ–‡æ¡£](https://mermaid.js.org/)ã€‚

**Infographic ä¿¡æ¯å›¾ï¼š**

æ”¯æŒä½¿ç”¨ [@antv/infographic](https://infographic.antv.vision/) åœ¨ Markdown ä¸­ç»˜åˆ¶ç²¾ç¾çš„ä¿¡æ¯å›¾è¡¨ï¼Œé€‚åˆå±•ç¤ºæµç¨‹ã€å¯¹æ¯”ã€å±‚çº§ã€ç»Ÿè®¡ç­‰æ•°æ®ã€‚

ä½¿ç”¨æ–¹å¼ï¼šåœ¨ä»£ç å—ä¸­ä½¿ç”¨ `infographic` æ ‡è®°ï¼Œç¬¬ä¸€è¡ŒæŒ‡å®šæ¨¡æ¿åç§°ï¼Œç„¶åä½¿ç”¨ç±»ä¼¼ YAML çš„è¯­æ³•å®šä¹‰æ•°æ®ï¼š

````markdown
```infographic
infographic list-grid-badge-card
data
  title æŠ€æœ¯æ ˆ
  desc æˆ‘çš„å¸¸ç”¨æŠ€æœ¯æ ˆ
  items
    - label TypeScript
      desc ç±»å‹å®‰å…¨çš„ JavaScript
      icon mdi/language-typescript
    - label React
      desc ç”¨æˆ·ç•Œé¢åº“
      icon mdi/react
    - label Astro
      desc ç°ä»£åŒ–é™æ€ç«™ç‚¹ç”Ÿæˆå™¨
      icon mdi/rocket-launch
```
````

```infographic
infographic list-grid-badge-card
data
  title æŠ€æœ¯æ ˆ
  desc æˆ‘çš„å¸¸ç”¨æŠ€æœ¯æ ˆ
  items
    - label TypeScript
      desc ç±»å‹å®‰å…¨çš„ JavaScript
      icon mdi/language-typescript
    - label React
      desc ç”¨æˆ·ç•Œé¢åº“
      icon mdi/react
    - label Astro
      desc ç°ä»£åŒ–é™æ€ç«™ç‚¹ç”Ÿæˆå™¨
      icon mdi/rocket-launch
```

**å¯ç”¨æ¨¡æ¿ç±»å‹ï¼š**

- **åˆ—è¡¨ç±»** (`list-*`)ï¼šå±•ç¤ºä¿¡æ¯åˆ—è¡¨

  - `list-grid-badge-card` - å¡ç‰‡ç½‘æ ¼å¸ƒå±€
  - `list-grid-candy-card-lite` - ç³–æœé£æ ¼å¡ç‰‡
  - `list-row-horizontal-icon-arrow` - æ°´å¹³å›¾æ ‡ç®­å¤´åˆ—è¡¨

- **æµç¨‹/é¡ºåºç±»** (`sequence-*`)ï¼šå±•ç¤ºæ­¥éª¤ã€æµç¨‹æˆ–é˜¶æ®µ

  - `sequence-zigzag-steps-underline-text` - ä¹‹å­—å½¢æ­¥éª¤
  - `sequence-circular-simple` - åœ†å½¢æµç¨‹
  - `sequence-roadmap-vertical-simple` - å‚ç›´è·¯çº¿å›¾
  - `sequence-pyramid-simple` - é‡‘å­—å¡”ç»“æ„

- **å¯¹æ¯”ç±»** (`compare-*`)ï¼šäºŒå…ƒæˆ–å¤šå…ƒå¯¹æ¯”

  - `compare-binary-horizontal-simple-fold` - æ°´å¹³äºŒå…ƒå¯¹æ¯”
  - `compare-swot` - SWOT åˆ†æ
  - `compare-hierarchy-left-right-circle-node-pill-badge` - å±‚çº§å·¦å³å¯¹æ¯”

- **å±‚çº§ç±»** (`hierarchy-*`)ï¼šå±•ç¤ºæ ‘å½¢ç»“æ„

  - `hierarchy-tree-tech-style-capsule-item` - ç§‘æŠ€é£æ ¼æ ‘å½¢å›¾
  - `hierarchy-tree-curved-line-rounded-rect-node` - æ›²çº¿è¿æ¥æ ‘å½¢å›¾

- **å›¾è¡¨ç±»** (`chart-*`)ï¼šæ•°æ®å¯è§†åŒ–

  - `chart-column-simple` - æŸ±çŠ¶å›¾
  - `chart-bar-plain-text` - æ¡å½¢å›¾
  - `chart-pie-plain-text` - é¥¼å›¾
  - `chart-line-plain-text` - æŠ˜çº¿å›¾

- **å…¶ä»–**
  - `quadrant-*` - è±¡é™åˆ†æå›¾
  - `relation-*` - å…³ç³»å›¾

**æ•°æ®å­—æ®µè¯´æ˜ï¼š**

- `title` - æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰
- `desc` - æè¿°æ–‡æœ¬ï¼ˆå¯é€‰ï¼‰
- `items` - æ¡ç›®æ•°ç»„ï¼Œæ¯ä¸ªæ¡ç›®å¯åŒ…å«ï¼š
  - `label` - ä¸»æ ‡ç­¾æ–‡æœ¬
  - `value` - æ•°å€¼ï¼ˆç”¨äºå›¾è¡¨ç±»æ¨¡æ¿ï¼‰
  - `desc` - æè¿°æ–‡æœ¬
  - `icon` - å›¾æ ‡åç§°ï¼ˆæ ¼å¼ï¼š`mdi/icon-name`ï¼‰
  - `children` - å­æ¡ç›®ï¼ˆç”¨äºå±‚çº§ç»“æ„ï¼‰

**ä¸»é¢˜å®šåˆ¶ï¼š**

å¯ä»¥åœ¨æ•°æ®åæ·»åŠ  `theme` å—è‡ªå®šä¹‰é¢œè‰²ï¼š

````markdown
```infographic
infographic sequence-pyramid-simple
data
  items
    - label åŸºç¡€å±‚
    - label ä¸­é—´å±‚
    - label é¡¶å±‚
theme
  palette
    - #3b82f6
    - #8b5cf6
    - #f97316
```
````

ä¿¡æ¯å›¾ä¼šè‡ªåŠ¨è·Ÿéšæ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢ï¼Œå¹¶ä½¿ç”¨é¡¹ç›®çš„å¯’è‰å…¨åœ†ä½“å­—ä½“æ¸²æŸ“ã€‚æ›´å¤šæ¨¡æ¿å’Œè¯­æ³•å‚è€ƒ [Infographic å®˜æ–¹æ–‡æ¡£](https://infographic.antv.vision/)ã€‚

**ä»£ç é«˜äº®ï¼š**

- åŸºäº Shiki
- æ”¯æŒåŒä¸»é¢˜ï¼ˆæ·±è‰²/æµ…è‰²ï¼‰
- æ”¯æŒè¯­è¨€æ ‡æ³¨
- è¡Œå·æ˜¾ç¤º

ç¤ºä¾‹ï¼š

````markdown
```javascript
function hello() {
  console.log("Hello, world!");
}
```
````

```javascript
function hello() {
  console.log("Hello, world!");
}
```

**æ ‡é¢˜è‡ªåŠ¨é“¾æ¥ï¼š**

æ‰€æœ‰æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆå¯ç‚¹å‡»çš„é”šç‚¹é“¾æ¥ã€‚

**é“¾æ¥è‡ªåŠ¨åµŒå…¥ï¼š**

ç‹¬è¡Œçš„ç‰¹æ®Šé“¾æ¥ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºåµŒå…¥ç»„ä»¶ï¼š

- **Twitter/X é“¾æ¥**ï¼šè‡ªåŠ¨åµŒå…¥ Tweet ç»„ä»¶
- **CodePen é“¾æ¥**ï¼šè‡ªåŠ¨åµŒå…¥äº¤äº’å¼ CodePen æ¼”ç¤º
- **å…¶ä»–é“¾æ¥**ï¼šæ˜¾ç¤º OG é¢„è§ˆå¡ç‰‡ï¼ˆåŒ…å«æ ‡é¢˜ã€æè¿°ã€å›¾ç‰‡ç­‰ï¼‰

ç¤ºä¾‹ï¼š

```markdown
<!-- ç‹¬è¡Œé“¾æ¥ä¼šè¢«åµŒå…¥ -->

https://x.com/vercel_dev/status/1997059920936775706

https://codepen.io/botteu/pen/YPKBrJX/

https://github.com/vercel/react-tweet

åçˆ¬ä¸¥æ ¼ï¼Œè·å–ä¸åˆ°å…ƒä¿¡æ¯çš„é“¾æ¥

https://zhuanlan.zhihu.com/p/1900483903984243480

<!-- æ®µè½ä¸­çš„é“¾æ¥ä¿æŒä¸å˜ -->

è¿™æ˜¯ä¸€ä¸ª [æ™®é€šé“¾æ¥](https://example.com)ï¼Œä¸ä¼šè¢«åµŒå…¥ã€‚
```

https://x.com/vercel_dev/status/1997059920936775706

https://codepen.io/botteu/pen/YPKBrJX/

https://github.com/vercel/react-tweet

åçˆ¬ä¸¥æ ¼ï¼Œè·å–ä¸åˆ°å…ƒä¿¡æ¯çš„é“¾æ¥

https://zhuanlan.zhihu.com/p/1900483903984243480

<!-- æ®µè½ä¸­çš„é“¾æ¥ä¿æŒä¸å˜ -->

è¿™æ˜¯ä¸€ä¸ª [æ™®é€šé“¾æ¥](https://example.com)ï¼Œä¸ä¼šè¢«åµŒå…¥ã€‚

**Shoka å…¼å®¹ Markdown è¯­æ³•ï¼š**

astro-koharu ä» Hexo Shoka ä¸»é¢˜è¿ç§»äº†ä¸€å¥—ä¸°å¯Œçš„ Markdown æ‰©å±•è¯­æ³•ï¼Œæ‰€æœ‰åŠŸèƒ½å‡å¯é€šè¿‡ `config/site.yaml` çš„ `content` é…ç½®é¡¹ç‹¬ç«‹å¼€å…³ã€‚

*æ–‡å­—ç‰¹æ•ˆï¼ˆ`enableShokaEffects`ï¼‰ï¼š*

æ”¯æŒå¤šç§è¡Œå†…æ–‡å­—è£…é¥°æ•ˆæœï¼š

| è¯­æ³•                    | æ•ˆæœ       | è¯´æ˜                               |
| ----------------------- | ---------- | ---------------------------------- |
| `++æ–‡å­—++`              | ä¸‹åˆ’çº¿     | `<ins>` æ ‡ç­¾                       |
| `++æ–‡å­—++{.wavy}`       | æ³¢æµªä¸‹åˆ’çº¿ | æ”¯æŒ `.wavy` ä¿®é¥°ç¬¦                |
| `++æ–‡å­—++{.dot}`        | ç€é‡ç‚¹     | æ”¯æŒ `.dot` ä¿®é¥°ç¬¦                 |
| `++æ–‡å­—++{.primary}`    | å½©è‰²ä¸‹åˆ’çº¿ | æ”¯æŒ `.primary` `.success` `.warning` `.danger` `.info` |
| `==æ–‡å­—==`              | é«˜äº®       | `<mark>` æ ‡ç­¾                      |
| `~æ–‡å­—~`                | ä¸‹æ ‡       | `<sub>` æ ‡ç­¾ï¼Œå¦‚ H~2~O            |
| `^æ–‡å­—^`                | ä¸Šæ ‡       | `<sup>` æ ‡ç­¾ï¼Œå¦‚ E=mc^2^          |

ç¤ºä¾‹æ•ˆæœï¼š

++è¿™æ˜¯ä¸‹åˆ’çº¿æ–‡å­—++ ++æ³¢æµªä¸‹åˆ’çº¿++{.wavy} ++ç€é‡ç‚¹æ ‡è®°++{.dot}

++ä¸»è‰²è°ƒ++{.primary} ++æˆåŠŸ++{.success} ++è­¦å‘Š++{.warning} ++å±é™©++{.danger} ++ä¿¡æ¯++{.info}

==è¿™æ˜¯é«˜äº®æ–‡å­—==

H~2~O æ˜¯æ°´çš„åŒ–å­¦å¼ï¼ŒE = mc^2^ æ˜¯è´¨èƒ½æ–¹ç¨‹

*é¢œè‰²æ–‡å­—ä¸ç‰¹æ®Šæ ·å¼ï¼ˆ`enableShokaAttrs`ï¼‰ï¼š*

ä½¿ç”¨ `[æ–‡å­—]{.class}` è¯­æ³•ä¸ºæ–‡å­—æ·»åŠ é¢œè‰²å’Œæ ·å¼ï¼š

```markdown
[çº¢è‰²]{.red} [ç²‰è‰²]{.pink} [æ©™è‰²]{.orange} [é»„è‰²]{.yellow}
[ç»¿è‰²]{.green} [æ°´è‰²]{.aqua} [è“è‰²]{.blue} [ç´«è‰²]{.purple} [ç°è‰²]{.grey}

[è¿™æ®µæ–‡å­—ä¼šæœ‰å½©è™¹æ¸å˜æ•ˆæœ]{.rainbow}

[Ctrl]{.kbd} + [C]{.kbd} å¤åˆ¶ï¼Œ[Ctrl]{.kbd} + [V]{.kbd} ç²˜è´´

[é»˜è®¤]{.label .default} [ä¸»è¦]{.label .primary} [ä¿¡æ¯]{.label .info}
[æˆåŠŸ]{.label .success} [è­¦å‘Š]{.label .warning} [å±é™©]{.label .danger}
```

ç¤ºä¾‹æ•ˆæœï¼š

[çº¢è‰²]{.red} [ç²‰è‰²]{.pink} [æ©™è‰²]{.orange} [é»„è‰²]{.yellow} [ç»¿è‰²]{.green} [æ°´è‰²]{.aqua} [è“è‰²]{.blue} [ç´«è‰²]{.purple} [ç°è‰²]{.grey}

[è¿™æ®µæ–‡å­—ä¼šæœ‰å½©è™¹æ¸å˜æ•ˆæœ]{.rainbow}

[Ctrl]{.kbd} + [C]{.kbd} å¤åˆ¶ï¼Œ[Ctrl]{.kbd} + [V]{.kbd} ç²˜è´´

[é»˜è®¤]{.label .default} [ä¸»è¦]{.label .primary} [ä¿¡æ¯]{.label .info} [æˆåŠŸ]{.label .success} [è­¦å‘Š]{.label .warning} [å±é™©]{.label .danger}

*éšè—æ–‡å­— / Spoilerï¼ˆ`enableShokaSpoiler`ï¼‰ï¼š*

```markdown
è¿™é‡Œæœ‰ä¸€æ®µ!!éšè—æ–‡å­—ï¼Œç‚¹å‡»æ˜¾ç¤º!!

è¿™é‡Œæœ‰ä¸€æ®µ!!æ¨¡ç³Šæ–‡å­—ï¼Œé¼ æ ‡æ‚¬åœæ˜¾ç¤º!!{.blur}
```

ç¤ºä¾‹æ•ˆæœï¼š

è¿™é‡Œæœ‰ä¸€æ®µ!!éšè—æ–‡å­—ï¼Œç‚¹å‡»æ˜¾ç¤º!!

è¿™é‡Œæœ‰ä¸€æ®µ!!æ¨¡ç³Šæ–‡å­—ï¼Œé¼ æ ‡æ‚¬åœæ˜¾ç¤º!!{.blur}

- é»˜è®¤æ¨¡å¼ï¼šç‚¹å‡»åç²’å­æ¶ˆæ•£åŠ¨ç”»æ­ç¤ºæ–‡å­—ï¼ˆåŸºäº spoilerjs Web Componentï¼‰
- `.blur` æ¨¡å¼ï¼šé¼ æ ‡æ‚¬åœæ—¶æ¨¡ç³Šæ¶ˆå¤±

*æ³¨éŸ³æ ‡æ³¨ / Rubyï¼ˆ`enableShokaRuby`ï¼‰ï¼š*

ä¸º CJK æ–‡å­—æ·»åŠ æ³¨éŸ³ï¼Œé€‚ç”¨äºæ—¥è¯­å‡åã€æ±‰è¯­æ‹¼éŸ³ç­‰ï¼š

```markdown
{æ¼¢å­—^ã‹ã‚“ã˜}çš„æ³¨éŸ³ç¤ºä¾‹

{å–ã‚Šè¿”ã™^ã¨ã‚Šã‹ãˆã™}æ˜¯æ—¥è¯­ä¸­"å–å›"çš„æ„æ€
```

ç¤ºä¾‹æ•ˆæœï¼š

{æ¼¢å­—^ã‹ã‚“ã˜}çš„æ³¨éŸ³ç¤ºä¾‹ã€‚{å–ã‚Šè¿”ã™^ã¨ã‚Šã‹ãˆã™}æ˜¯æ—¥è¯­ä¸­"å–å›"çš„æ„æ€ã€‚

æ¸²æŸ“ä¸º HTML `<ruby>` æ ‡ç­¾ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒã€‚

*æé†’å— / Note Blocksï¼ˆ`enableShokaContainers`ï¼‰ï¼š*

ä½¿ç”¨ `:::` è¯­æ³•åˆ›å»ºä¸åŒæ ·å¼çš„æé†’å—ï¼š

```markdown
:::default
è¿™æ˜¯é»˜è®¤æé†’å—
:::

:::primary
è¿™æ˜¯ä¸»è¦æé†’å—ï¼Œç”¨äºé‡è¦æç¤º
:::

:::info
è¿™æ˜¯ä¿¡æ¯æé†’å—
:::

:::success
è¿™æ˜¯æˆåŠŸæé†’å—
:::

:::warning
è¿™æ˜¯è­¦å‘Šæé†’å—
:::

:::danger
è¿™æ˜¯å±é™©æé†’å—
:::

:::info no-icon
è¿™æ˜¯æ²¡æœ‰å›¾æ ‡çš„ä¿¡æ¯å—
:::
```

ç¤ºä¾‹æ•ˆæœï¼š

:::info
è¿™æ˜¯ä¿¡æ¯æé†’å—ï¼Œç”¨äºæä¾›é¢å¤–ä¿¡æ¯
:::

:::warning
è¿™æ˜¯è­¦å‘Šæé†’å—ï¼Œè¯·æ³¨æ„
:::

:::danger
è¿™æ˜¯å±é™©æé†’å—ï¼ŒåŠ¡å¿…è°¨æ…
:::

æ”¯æŒçš„æ ·å¼ï¼š`default`ã€`primary`ã€`info`ã€`success`ã€`warning`ã€`danger`ã€‚æ·»åŠ  `no-icon` å¯éšè—å›¾æ ‡ã€‚æé†’å—å†…éƒ¨æ”¯æŒåµŒå¥— Markdown è¯­æ³•ã€‚

*æŠ˜å å— / Collapseï¼ˆ`enableShokaContainers`ï¼‰ï¼š*

ä½¿ç”¨ `+++` è¯­æ³•åˆ›å»ºå¯æŠ˜å å†…å®¹ï¼ˆæ¸²æŸ“ä¸º `<details>` + `<summary>`ï¼‰ï¼š

```markdown
+++primary ç‚¹å‡»å±•å¼€è¯¦ç»†å†…å®¹
æŠ˜å çš„å†…å®¹ï¼Œæ”¯æŒ **Markdown** æ ¼å¼åŒ–ã€‚

- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2
+++

+++warning æ³¨æ„äº‹é¡¹
éœ€è¦æ³¨æ„çš„å†…å®¹
+++

+++danger å±é™©æ“ä½œ
è¯·ç¡®ä¿ä½ çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆï¼
+++
```

ç¤ºä¾‹æ•ˆæœï¼š

+++primary ç‚¹å‡»å±•å¼€è¯¦ç»†å†…å®¹
æŠ˜å çš„å†…å®¹ï¼Œæ”¯æŒ **Markdown** æ ¼å¼åŒ–ã€‚

- åˆ—è¡¨é¡¹ 1
- åˆ—è¡¨é¡¹ 2
+++

+++warning æ³¨æ„äº‹é¡¹
éœ€è¦æ³¨æ„çš„å†…å®¹
+++

æ”¯æŒçš„æ ·å¼ï¼š`primary`ã€`info`ã€`success`ã€`warning`ã€`danger`ã€‚

*æ ‡ç­¾å¡ / Tabsï¼ˆ`enableShokaContainers`ï¼‰ï¼š*

ä½¿ç”¨ `;;;` è¯­æ³•åˆ›å»ºæ ‡ç­¾é¡µåˆ‡æ¢ï¼ŒåŒä¸€ç»„ ID çš„æ ‡ç­¾å¡ä¼šè‡ªåŠ¨ç»„åˆï¼š

````markdown
;;;mygroup JavaScript
```js
console.log('Hello, World!');
```
;;;

;;;mygroup Python
```python
print('Hello, World!')
```
;;;

;;;mygroup Rust
```rust
fn main() {
    println!("Hello, World!");
}
```
;;;
````

ç¤ºä¾‹æ•ˆæœï¼š

;;;guide-tab1 JavaScript
```js
console.log('Hello, World!');
```
;;;

;;;guide-tab1 Python
```python
print('Hello, World!')
```
;;;

;;;guide-tab1 Rust
```rust
fn main() {
    println!("Hello, World!");
}
```
;;;

- `;;;groupId æ ‡ç­¾å` å®šä¹‰ä¸€ä¸ªæ ‡ç­¾é¡µï¼ŒåŒä¸€ `groupId` çš„æ ‡ç­¾è‡ªåŠ¨ç»„åˆ
- ç¬¬ä¸€ä¸ªæ ‡ç­¾é»˜è®¤æ¿€æ´»
- æ ‡ç­¾å†…æ”¯æŒä»»æ„ Markdown å†…å®¹

*å‹é“¾å¡ç‰‡ï¼ˆ`enableShokaHexoTags`ï¼‰ï¼š*

ä½¿ç”¨ `{% links %}` æ ‡ç­¾åœ¨æ–‡ç« ä¸­æ’å…¥å‹é“¾å¡ç‰‡ç½‘æ ¼ï¼š

```markdown
{% links %}
- site: åšå®¢åç§°
  url: https://example.com
  owner: ç«™é•¿æ˜µç§°
  desc: ç«™ç‚¹æè¿°
  image: https://example.com/avatar.png
  color: '#ed788b'
- site: å¦ä¸€ä¸ªåšå®¢
  url: https://example2.com
  owner: Alice
  desc: ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„åšå®¢
  image: https://api.dicebear.com/7.x/avataaars/svg?seed=Alice
  color: '#BEDCFF'
{% endlinks %}
```

ç¤ºä¾‹æ•ˆæœï¼š

{% links %}
- site: ä½™å¼¦ã®åšå®¢
  url: https://blog.cosine.ren
  owner: cos
  desc: FE / ACG / æ‰‹å·¥
  image: https://blog.cosine.ren/img/avatar.webp
  color: '#ed788b'
- site: ç¤ºä¾‹åšå®¢
  url: https://example.com
  owner: Alice
  desc: ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„åšå®¢
  image: https://api.dicebear.com/7.x/avataaars/svg?seed=Alice
  color: '#BEDCFF'
{% endlinks %}

å¡ç‰‡æ•°æ®ä½¿ç”¨ YAML æ ¼å¼ï¼Œæ”¯æŒ `site`ã€`url`ã€`owner`ã€`desc`ã€`image`ã€`color` å­—æ®µã€‚

*éŸ³é¢‘æ’­æ”¾å™¨ï¼ˆ`enableShokaHexoTags`ï¼‰ï¼š*

ä½¿ç”¨ `{% media audio %}` æ ‡ç­¾åµŒå…¥éŸ³é¢‘æ’­æ”¾å™¨ï¼Œæ”¯æŒç½‘æ˜“äº‘éŸ³ä¹ç­‰å¹³å°ï¼ˆé€šè¿‡ Meting API è§£æï¼‰ï¼š

```markdown
{% media audio %}
- name: æ­Œæ›²åç§°
  url: https://music.163.com/#/song?id=3339210292
{% endmedia %}
```

ç¤ºä¾‹æ•ˆæœï¼š

{% media audio %}
- name: ç¤ºä¾‹éŸ³é¢‘
  url: https://music.163.com/#/song?id=3339210292
{% endmedia %}

æ”¯æŒæ­Œå•æ¨¡å¼ï¼Œå¯é…ç½®å¤šä¸ªåˆ†ç»„ï¼š

```markdown
{% media audio %}
- title: æ­Œå•åç§° 1
  list:
    - https://music.163.com/#/playlist?id=8676645748
- title: æ­Œå•åç§° 2
  list:
    - https://music.163.com/#/playlist?id=17606384886
{% endmedia %}
```

{% media audio %}
- title: æ­Œå•åç§° 1
  list:
    - https://music.163.com/#/playlist?id=8676645748
- title: æ­Œå•åç§° 2
  list:
    - https://music.163.com/#/playlist?id=17606384886
{% endmedia %}

*è§†é¢‘æ’­æ”¾å™¨ï¼ˆ`enableShokaHexoTags`ï¼‰ï¼š*

ä½¿ç”¨ `{% media video %}` æ ‡ç­¾åµŒå…¥è§†é¢‘æ’­æ”¾å™¨ï¼š

```markdown
{% media video %}
- name: è§†é¢‘ 1
  url: https://example.com/video1.mp4
- name: è§†é¢‘ 2
  url: https://example.com/video2.mp4
{% endmedia %}
```

{% media video %}
- name: è§†é¢‘ 1
  url: https://example.com/video1.mp4
- name: è§†é¢‘ 2
  url: https://example.com/video2.mp4
{% endmedia %}

å¤šä¸ªè§†é¢‘æ—¶è‡ªåŠ¨æ˜¾ç¤ºæ’­æ”¾åˆ—è¡¨ã€‚

*ç»ƒä¹ é¢˜ç³»ç»Ÿï¼ˆ`enableQuiz`ï¼‰ï¼š*

æ”¯æŒå››ç§äº¤äº’å¼é¢˜å‹ï¼Œé€‚åˆæ•™ç¨‹å’Œå­¦ä¹ ç¬”è®°ã€‚éœ€åœ¨æ–‡ç«  frontmatter ä¸­è®¾ç½® `quiz: true`ã€‚

**å•é€‰é¢˜ï¼š**

```markdown
- ä¸‹åˆ—å“ªä¸ªæ˜¯ JavaScript çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ{.quiz}
  - Object{.options}
  - Array{.options}
  - Symbol{.correct}
  - Function{.options}

> è§£æï¼šSymbol æ˜¯ ES6 å¼•å…¥çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚
```

ç¤ºä¾‹æ•ˆæœï¼š

- ä¸‹åˆ—å“ªä¸ªæ˜¯ JavaScript çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Ÿ{.quiz}
  - Object{.options}
  - Array{.options}
  - Symbol{.correct}
  - Function{.options}

> è§£æï¼šSymbol æ˜¯ ES6 å¼•å…¥çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œ Objectã€Arrayã€Function éƒ½æ˜¯å¼•ç”¨ç±»å‹ã€‚

- é€‰é¡¹æ ‡è®° `{.correct}` ä¸ºæ­£ç¡®ç­”æ¡ˆï¼Œ`{.options}` ä¸ºå¹²æ‰°é¡¹

**å¤šé€‰é¢˜ï¼š**

```markdown
- ä»¥ä¸‹å“ªäº›æ˜¯ CSS å¸ƒå±€æ–¹å¼ï¼Ÿ{.quiz .multi}
  - Flexbox{.correct}
  - jQuery{.options}
  - Grid{.correct}
  - Float{.correct}

> è§£æï¼šFlexboxã€Grid å’Œ Float éƒ½æ˜¯ CSS å¸ƒå±€æ–¹å¼ã€‚
```

ç¤ºä¾‹æ•ˆæœï¼š

- ä»¥ä¸‹å“ªäº›æ˜¯ CSS å¸ƒå±€æ–¹å¼ï¼Ÿ{.quiz .multi}
  - Flexbox{.correct}
  - jQuery{.options}
  - Grid{.correct}
  - Float{.correct}

> è§£æï¼šFlexboxã€Grid å’Œ Float éƒ½æ˜¯ CSS å¸ƒå±€æ–¹å¼ã€‚jQuery æ˜¯ä¸€ä¸ª JavaScript åº“ã€‚

- æ·»åŠ  `.multi` æ ‡è®°å¯ç”¨å¤šé€‰æ¨¡å¼

**åˆ¤æ–­é¢˜ï¼š**

```markdown
- `const` å£°æ˜çš„å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹å…¶å±æ€§ã€‚{.quiz .true}

> è§£æï¼š`const` åªä¿è¯å˜é‡ç»‘å®šä¸å¯å˜ã€‚

- HTML æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚{.quiz}

> è§£æï¼šHTML æ˜¯æ ‡è®°è¯­è¨€ï¼Œä¸æ˜¯ç¼–ç¨‹è¯­è¨€ã€‚
```

ç¤ºä¾‹æ•ˆæœï¼š

- `const` å£°æ˜çš„å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œä½†å¯ä»¥ä¿®æ”¹å…¶å±æ€§ã€‚{.quiz .true}

> è§£æï¼š`const` åªä¿è¯å˜é‡ç»‘å®šä¸å¯å˜ï¼Œå¦‚æœå˜é‡æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§ä»ç„¶å¯ä»¥ä¿®æ”¹ã€‚

- HTML æ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚{.quiz}

> è§£æï¼šHTMLï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼Œä¸æ˜¯ç¼–ç¨‹è¯­è¨€ã€‚

- æ·»åŠ  `.true` è¡¨ç¤ºé™ˆè¿°æ­£ç¡®ï¼Œä¸æ·»åŠ  `.true` åˆ™è¡¨ç¤ºé”™è¯¯

**å¡«ç©ºé¢˜ï¼š**

```markdown
- CSS ä¸­ï¼Œ[Flexbox]{.gap} é€‚åˆä¸€ç»´å¸ƒå±€ï¼Œ[Grid]{.gap} é€‚åˆäºŒç»´å¸ƒå±€ã€‚{.quiz .fill}

> å¸¸è§é”™è¯¯ï¼š[Float]{.mistake}
```

ç¤ºä¾‹æ•ˆæœï¼š

- CSS ä¸­ï¼Œ[Flexbox]{.gap} é€‚åˆä¸€ç»´å¸ƒå±€ï¼Œ[Grid]{.gap} é€‚åˆäºŒç»´å¸ƒå±€ã€‚{.quiz .fill}

> å¸¸è§é”™è¯¯ï¼š[Float]{.mistake}

- `[ç­”æ¡ˆ]{.gap}` æ ‡è®°æ­£ç¡®ç­”æ¡ˆï¼ˆæ”¯æŒå¤šä¸ªç©ºï¼‰
- `[é”™è¯¯ç­”æ¡ˆ]{.mistake}` æ ‡è®°å¸¸è§é”™è¯¯ï¼ˆé¦–æ¬¡ç­”é”™æ—¶æç¤ºï¼‰
- `>` å¼•ç”¨å—å†…å®¹ä¸ºè§£æè¯´æ˜

*æ•°å­¦å…¬å¼ï¼ˆ`enableMath`ï¼‰ï¼š*

åŸºäº KaTeX æ¸²æŸ“æ•°å­¦å…¬å¼ã€‚éœ€åœ¨æ–‡ç«  frontmatter ä¸­è®¾ç½® `math: true`ï¼š

```markdown
è¡Œå†…å…¬å¼ï¼š$E = mc^2$

å—çº§å…¬å¼ï¼š

$$
\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}
$$
```

ç¤ºä¾‹æ•ˆæœï¼š

è¡Œå†…å…¬å¼ï¼š$E = mc^2$

å—çº§å…¬å¼ï¼š

$$
\sum_{n=1}^{\infty} \frac{1}{n^2} = \frac{\pi^2}{6}
$$

*ä»£ç å—å¢å¼ºï¼ˆ`enableCodeMeta`ï¼‰ï¼š*

ä»£ç å—æ”¯æŒé¢å¤–çš„å…ƒæ•°æ®æ ‡æ³¨ï¼š

`````markdown
```js title="hello.js" url="https://example.com" linkText="æŸ¥çœ‹æºç " mark:1,3
const greeting = 'Hello';
const name = 'World';
console.log(`${greeting}, ${name}!`);
```

```bash command:("$":1-3)
npm install astro
npm run dev
npm run build
```
`````

| å…ƒæ•°æ®                  | è¯´æ˜                                     |
| ----------------------- | ---------------------------------------- |
| `title="æ–‡ä»¶å"`        | æ˜¾ç¤ºä»£ç å—æ ‡é¢˜                           |
| `url="é“¾æ¥"`            | æ·»åŠ å¤–éƒ¨æºç é“¾æ¥                         |
| `linkText="æ–‡å­—"`       | è‡ªå®šä¹‰é“¾æ¥æ–‡å­—ï¼ˆé»˜è®¤ä¸º URLï¼‰             |
| `mark:1,3`              | é«˜äº®æŒ‡å®šè¡Œ                               |
| `command:("$":1-3)`     | æ ‡è®° shell å‘½ä»¤è¡Œï¼ˆæ˜¾ç¤º `$` å‰ç¼€ï¼‰       |

ç¤ºä¾‹æ•ˆæœï¼š

```js title="hello.js" url="https://example.com" linkText="æŸ¥çœ‹æºç " mark:1,3
const greeting = 'Hello';
const name = 'World';
console.log(`${greeting}, ${name}!`);
```

```bash command:("$":1-3)
npm install astro
npm run dev
npm run build
```

*Shoka åŠŸèƒ½é…ç½®æ€»è§ˆï¼š*

æ‰€æœ‰ Shoka å…¼å®¹åŠŸèƒ½å‡å¯åœ¨ `config/site.yaml` çš„ `content` éƒ¨åˆ†ç‹¬ç«‹å¼€å…³ï¼š

```yaml
content:
  # Shoka å…¼å®¹åŠŸèƒ½ï¼ˆé»˜è®¤å…¨éƒ¨å¯ç”¨ï¼Œè®¾ä¸º false å¯å…³é—­ï¼‰
  enableShokaContainers: true   # :::æé†’å— ;;;æ ‡ç­¾å¡ +++æŠ˜å å—
  enableShokaAttrs: true        # [text]{.class} å±æ€§è¯­æ³•
  enableShokaEffects: true      # ++ä¸‹åˆ’çº¿++ ==é«˜äº®== ~ä¸‹æ ‡~ ^ä¸Šæ ‡^
  enableShokaSpoiler: true      # !!éšè—æ–‡å­—!!
  enableShokaRuby: true         # {æ–‡å­—^æ³¨éŸ³} æ³¨éŸ³æ ‡æ³¨
  enableShokaHexoTags: true     # {% links %} {% media %} Hexo æ ‡ç­¾
  enableMath: true              # $æ•°å­¦å…¬å¼$ KaTeX æ¸²æŸ“
  enableCodeMeta: true          # ä»£ç å—å¢å¼º (title, mark, command)
  enableQuiz: true              # ç»ƒä¹ é¢˜äº¤äº’åŠŸèƒ½
```

> **æç¤º**ï¼šå®Œæ•´çš„è¯­æ³•æ¼”ç¤ºå¯å‚è€ƒ [Shoka ä¸»é¢˜ Markdown è¯­æ³•æ¼”ç¤º](/post/shoka-features) æ–‡ç« ã€‚

**å…¶ä»–å¢å¼ºï¼š**

- è‡ªåŠ¨ç›®å½•ç”Ÿæˆ
- é˜…è¯»æ—¶é—´è®¡ç®—
- å¤–éƒ¨é“¾æ¥è‡ªåŠ¨æ·»åŠ  `target="_blank"`

### RSS è®¢é˜…

è®¿é—® `/rss.xml` è·å– RSS feedã€‚

**åŒ…å«å†…å®¹ï¼š**

- æœ€æ–°æ–‡ç« åˆ—è¡¨
- æ–‡ç« æ‘˜è¦
- å‘å¸ƒæ—¥æœŸ
- æ–‡ç« é“¾æ¥

### æ•°æ®ç»Ÿè®¡

é›†æˆ Umami åˆ†æï¼ˆå¯é€‰ï¼‰ã€‚

åœ¨ `config/site.yaml` ä¸­é…ç½®ï¼š

```yaml
analytics:
  umami:
    enabled: true
    id: your-umami-id
    endpoint: https://stats.example.com
```

## å¼€å‘æŒ‡å—

### ç›®å½•ç»“æ„

```plain
astro-koharu/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/      # é€šç”¨ç»„ä»¶ï¼ˆé”™è¯¯è¾¹ç•Œç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ ui/          # UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€å¡ç‰‡ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ layout/      # å¸ƒå±€ç»„ä»¶ï¼ˆå¤´éƒ¨ã€ä¾§è¾¹æ ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ post/        # æ–‡ç« ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ category/    # åˆ†ç±»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ theme/       # ä¸»é¢˜åˆ‡æ¢
â”‚   â”œâ”€â”€ content/
â”‚   â”‚   â””â”€â”€ blog/        # åšå®¢æ–‡ç« ï¼ˆMarkdownï¼‰
â”‚   â”œâ”€â”€ layouts/         # é¡µé¢å¸ƒå±€æ¨¡æ¿
â”‚   â”œâ”€â”€ pages/           # é¡µé¢è·¯ç”±
â”‚   â”œâ”€â”€ lib/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ hooks/           # React hooks
â”‚   â”œâ”€â”€ constants/       # å¸¸é‡é…ç½®
â”‚   â”œâ”€â”€ scripts/         # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ styles/          # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ types/           # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ public/              # é™æ€èµ„æº
â”‚   â””â”€â”€ img/             # å›¾ç‰‡èµ„æº
â”œâ”€â”€ config/
â”‚   â””â”€â”€ site.yaml        # ç«™ç‚¹é…ç½®ï¼ˆå«åˆ†ç±»æ˜ å°„ï¼‰
â”œâ”€â”€ astro.config.mjs     # Astro é…ç½®
â”œâ”€â”€ tailwind.config.ts   # Tailwind é…ç½®
â””â”€â”€ tsconfig.json        # TypeScript é…ç½®
```

### è·¯å¾„åˆ«å

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹è·¯å¾„åˆ«åï¼ˆåœ¨ `tsconfig.json` ä¸­ï¼‰ï¼š

```typescript
import { something } from "@/xxx"; // â†’ src/xxx
import Component from "@components/xxx"; // â†’ src/components/xxx
import { util } from "@lib/xxx"; // â†’ src/lib/xxx
import config from "@constants/xxx"; // â†’ src/constants/xxx
// ... æ›´å¤šåˆ«åè§ tsconfig.json
```

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ localhost:4321ï¼‰

# æ„å»º
pnpm build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm preview          # é¢„è§ˆç”Ÿäº§æ„å»º

# ä»£ç è´¨é‡
pnpm lint             # è¿è¡Œ ESLint
pnpm lint-md          # æ£€æŸ¥ Markdown æ–‡ä»¶
pnpm lint-md:fix      # è‡ªåŠ¨ä¿®å¤ Markdown é—®é¢˜
pnpm knip             # æŸ¥æ‰¾æœªä½¿ç”¨çš„æ–‡ä»¶å’Œä¾èµ–

# Koharu CLI
pnpm koharu                   # äº¤äº’å¼ä¸»èœå•
pnpm koharu new               # æ–°å»ºå†…å®¹ï¼ˆäº¤äº’å¼é€‰æ‹©ï¼‰
pnpm koharu new post          # æ–°å»ºåšå®¢æ–‡ç« 
pnpm koharu new friend        # æ–°å»ºå‹æƒ…é“¾æ¥
pnpm koharu backup            # å¤‡ä»½åšå®¢å†…å®¹ï¼ˆ--full å®Œæ•´å¤‡ä»½ï¼‰
pnpm koharu restore           # è¿˜åŸå¤‡ä»½ï¼ˆ--latest, --dry-runï¼‰
pnpm koharu update            # æ›´æ–°ä¸»é¢˜ï¼ˆ--check, --clean, --rebase, --tag, --dry-run ç­‰ï¼‰
pnpm koharu generate          # ç”Ÿæˆå†…å®¹èµ„äº§ï¼ˆäº¤äº’å¼é€‰æ‹©ï¼‰
pnpm koharu generate lqips    # ç”Ÿæˆ LQIP å ä½ç¬¦
pnpm koharu generate similarities  # ç”Ÿæˆç›¸ä¼¼åº¦å‘é‡
pnpm koharu generate summaries     # ç”Ÿæˆ AI æ‘˜è¦
pnpm koharu generate all      # ç”Ÿæˆå…¨éƒ¨èµ„äº§
pnpm koharu clean             # æ¸…ç†æ—§å¤‡ä»½ï¼ˆ--keep Nï¼‰
pnpm koharu list              # æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½

# å·¥å…·
pnpm change           # ç”Ÿæˆ CHANGELOG.mdï¼ˆåŸºäº git-cliffï¼‰
```

### Docker éƒ¨ç½²

astro-koharu æ”¯æŒé€šè¿‡ Docker è¿›è¡Œå®¹å™¨åŒ–éƒ¨ç½²ï¼Œé€‚åˆéœ€è¦è‡ªæ‰˜ç®¡çš„åœºæ™¯ã€‚

**å¿«é€Ÿå¼€å§‹ï¼š**

```bash
# 1. ç¼–è¾‘ config/site.yamlï¼Œé…ç½® comment.remark42 å’Œ analytics.umami éƒ¨åˆ†

# 2. æ„å»ºå¹¶å¯åŠ¨
docker compose -f docker/docker-compose.yml up -d --build

# 3. è®¿é—®
open http://localhost:4321
```

**ç›®å½•ç»“æ„ï¼š**

```plain
docker/
â”œâ”€â”€ Dockerfile           # å¤šé˜¶æ®µæ„å»ºé…ç½®
â”œâ”€â”€ docker-compose.yml   # ç¼–æ’é…ç½®
â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ default.conf     # Nginx é™æ€æœåŠ¡é…ç½®
â””â”€â”€ rebuild.sh           # ä¾¿æ·é‡å»ºè„šæœ¬
```

**å…³äºç”Ÿæˆè„šæœ¬ï¼š**

ä»¥ä¸‹è„šæœ¬**éœ€è¦åœ¨æœ¬åœ°è¿è¡Œ**ï¼Œä¸èƒ½åœ¨ Docker æ„å»ºæ—¶æ‰§è¡Œï¼š

| è„šæœ¬                         | åŸå›                           |
| ---------------------------- | ----------------------------- |
| `pnpm generate:lqips`        | ä½¿ç”¨ `sharp` åŸç”Ÿæ¨¡å—å¤„ç†å›¾ç‰‡ |
| `pnpm generate:similarities` | éœ€ä¸‹è½½ 500MB+ çš„ ML æ¨¡å‹      |
| `pnpm generate:summaries`    | éœ€è¿æ¥æœ¬åœ° LLM æœåŠ¡å™¨         |

**æ¨èå·¥ä½œæµï¼š**

```bash
# æœ¬åœ°å¼€å‘ï¼šæ·»åŠ æ–°å›¾ç‰‡æˆ–æ–‡ç« å
pnpm generate:all

# æäº¤ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶
git add src/assets/*.json
git commit -m "chore: update generated assets"

# é‡å»º Docker å®¹å™¨
./docker/rebuild.sh
```

**ä½¿ç”¨ rebuild.shï¼š**

```bash
cd docker
./rebuild.sh
```

è¯¥è„šæœ¬ä¼šï¼š

1. æ£€æŸ¥ç¯å¢ƒå˜é‡æ–‡ä»¶
2. åœæ­¢ç°æœ‰å®¹å™¨
3. é‡æ–°æ„å»ºå¹¶å¯åŠ¨

**è¯„è®ºä¸ç»Ÿè®¡é…ç½®ï¼š**

åœ¨ `config/site.yaml` ä¸­é…ç½®è¯„è®ºç³»ç»Ÿå’Œç»Ÿè®¡ï¼š

```yaml
# è¯„è®ºç³»ç»Ÿï¼ˆå¯é€‰ï¼‰
comment:
  remark42:
    enabled: true
    host: https://your-remark-server.com/
    siteId: your-site-id

# ç»Ÿè®¡ç³»ç»Ÿï¼ˆå¯é€‰ï¼‰
analytics:
  umami:
    enabled: true
    id: your-umami-id
    endpoint: https://your-umami-server.com
```

Docker ç«¯å£å¯åœ¨ `.env` ä¸­é…ç½® `BLOG_PORT=4321`ã€‚

**æ³¨æ„äº‹é¡¹ï¼š**

1. ç”Ÿæˆçš„ JSON æ–‡ä»¶å¿…é¡»æäº¤åˆ° gitï¼ŒDocker æ„å»ºæ—¶ä¼šç›´æ¥ä½¿ç”¨
2. å¦‚æœå¿˜è®°è¿è¡Œç”Ÿæˆè„šæœ¬ï¼Œç›¸å…³åŠŸèƒ½ï¼ˆLQIP å ä½ç¬¦ã€ç›¸å…³æ–‡ç« æ¨èç­‰ï¼‰å°†ä¸å¯ç”¨
3. Docker é•œåƒåŸºäº nginx:alpineï¼Œä»…åŒ…å«é™æ€æ–‡ä»¶ï¼Œæ— éœ€ Node.js è¿è¡Œæ—¶

### Koharu CLI

åšå®¢è‡ªå¸¦äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œæä¾›å¤‡ä»½è¿˜åŸã€ä¸»é¢˜æ›´æ–°ã€å†…å®¹ç”Ÿæˆã€æ–°å»ºå†…å®¹ç­‰åŠŸèƒ½ã€‚

**å¯åŠ¨æ–¹å¼ï¼š**

```bash
pnpm koharu              # äº¤äº’å¼ä¸»èœå•
```

#### æ–°å»ºå†…å®¹

ä½¿ç”¨ CLI å¿«é€Ÿåˆ›å»ºåšå®¢æ–‡ç« å’Œå‹é“¾ï¼š

```bash
# äº¤äº’å¼é€‰æ‹©åˆ›å»ºç±»å‹ï¼ˆæ–‡ç« æˆ–å‹é“¾ï¼‰
pnpm koharu new

# æˆ–ç›´æ¥æŒ‡å®šç±»å‹
pnpm koharu new post     # æ–°å»ºåšå®¢æ–‡ç« 
pnpm koharu new friend   # æ–°å»ºå‹æƒ…é“¾æ¥
```

**æ–°å»ºåšå®¢æ–‡ç« åŠŸèƒ½ï¼š**

- äº¤äº’å¼è¾“å…¥æ–‡ç« ä¿¡æ¯ï¼š
  - **æ ‡é¢˜** - æ–‡ç« æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰
  - **Slug** - è‡ªå®šä¹‰ URLï¼ˆå¯é€‰ï¼Œé»˜è®¤æ ¹æ®æ ‡é¢˜è‡ªåŠ¨ç”Ÿæˆæ‹¼éŸ³ï¼‰
  - **æè¿°** - æ–‡ç« æ‘˜è¦ï¼ˆå¯é€‰ï¼‰
  - **åˆ†ç±»** - ä»å·²æœ‰åˆ†ç±»ä¸­é€‰æ‹©ï¼ˆå¿…é€‰ï¼‰
  - **æ ‡ç­¾** - æ·»åŠ æ ‡ç­¾ï¼Œé€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰
  - **è‰ç¨¿** - æ˜¯å¦ä¿å­˜ä¸ºè‰ç¨¿ï¼ˆé»˜è®¤å¦ï¼‰
- è‡ªåŠ¨ç”Ÿæˆ frontmatterï¼ˆåŒ…å« titleã€dateã€categoriesã€tags ç­‰ï¼‰
- æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…è¦†ç›–
- æ–‡ç« ä¿å­˜åœ¨å¯¹åº”çš„åˆ†ç±»ç›®å½•ä¸‹ï¼ˆå¦‚ `src/content/blog/note/front-end/my-post.md`ï¼‰

**æ–°å»ºå‹æƒ…é“¾æ¥åŠŸèƒ½ï¼š**

- äº¤äº’å¼è¾“å…¥å‹é“¾ä¿¡æ¯ï¼š
  - **ç«™ç‚¹åç§°** - å‹ç«™çš„åç§°ï¼ˆå¿…å¡«ï¼‰
  - **ç«™ç‚¹ URL** - å‹ç«™çš„é“¾æ¥ï¼ˆå¿…å¡«ï¼Œéœ€å®Œæ•´ URLï¼‰
  - **ç«™é•¿æ˜µç§°** - å‹ç«™ç«™é•¿çš„æ˜µç§°ï¼ˆå¿…å¡«ï¼‰
  - **ç«™ç‚¹æè¿°** - å‹ç«™çš„ç®€ä»‹ï¼ˆå¿…å¡«ï¼‰
  - **å¤´åƒ URL** - å‹ç«™çš„å¤´åƒé“¾æ¥ï¼ˆå¿…å¡«ï¼‰
  - **ä¸»é¢˜è‰²** - å‹ç«™çš„ä¸»é¢˜è‰²ï¼ˆå¯é€‰ï¼Œå¯é€‰æ‹©é¢„è®¾é¢œè‰²æˆ–è‡ªå®šä¹‰åå…­è¿›åˆ¶ï¼‰
- è‡ªåŠ¨è¿½åŠ åˆ° `config/site.yaml` çš„ `friends.data` æ•°ç»„
- ä¿ç•™ YAML æ–‡ä»¶çš„æ ¼å¼å’Œæ³¨é‡Š

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```bash
# åˆ›å»ºæ–°æ–‡ç« 
pnpm koharu new post
# æŒ‰æç¤ºè¾“å…¥ï¼š
# æ ‡é¢˜: React Hooks ä½¿ç”¨æŒ‡å—
# Slug: (è‡ªåŠ¨ç”Ÿæˆ react-hooks-shi-yong-zhi-nanï¼Œå¯ä¿®æ”¹æˆ–æ¸…ç©º)
# æè¿°: React Hooks çš„å®Œæ•´ä½¿ç”¨æ•™ç¨‹
# åˆ†ç±»: é€‰æ‹©"ç¬”è®° â†’ å‰ç«¯"
# æ ‡ç­¾: React, Hooks, æ•™ç¨‹
# è‰ç¨¿: å¦

# åˆ›å»ºå‹é“¾
pnpm koharu new friend
# æŒ‰æç¤ºè¾“å…¥å‹ç«™ä¿¡æ¯
```

#### å¤‡ä»½ä¸è¿˜åŸ

æ›´æ–°ä¸»é¢˜å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½ä½ çš„ä¸ªäººå†…å®¹ï¼š

```bash
# åŸºç¡€å¤‡ä»½ï¼ˆåšå®¢æ–‡ç« ã€é…ç½®ã€å¤´åƒã€.envï¼‰
pnpm koharu backup

# å®Œæ•´å¤‡ä»½ï¼ˆåŒ…å«æ‰€æœ‰å›¾ç‰‡å’Œç”Ÿæˆçš„èµ„äº§ï¼‰
pnpm koharu backup --full

# æŸ¥çœ‹æ‰€æœ‰å¤‡ä»½
pnpm koharu list

# è¿˜åŸæœ€æ–°å¤‡ä»½
pnpm koharu restore --latest

# é¢„è§ˆå°†è¦è¿˜åŸçš„æ–‡ä»¶ï¼ˆä¸å®é™…è¿˜åŸï¼‰
pnpm koharu restore --dry-run

# å¼ºåˆ¶è¿˜åŸï¼ˆè¦†ç›–å·²å­˜åœ¨çš„æ–‡ä»¶ï¼‰
pnpm koharu restore --force

# æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘ 5 ä¸ªï¼‰
pnpm koharu clean --keep 5
```

å¤‡ä»½æ–‡ä»¶å­˜å‚¨åœ¨ `backups/` ç›®å½•ï¼Œæ ¼å¼ä¸º `backup-YYYY-MM-DD-HHMMSS.tar.gz`ã€‚

#### æ›´æ–°ä¸»é¢˜

ä½¿ç”¨ CLI è‡ªåŠ¨æ›´æ–°ä¸»é¢˜ï¼Œå®Œæˆå¤‡ä»½ â†’ æ‹‰å– â†’ åˆå¹¶ â†’ å®‰è£…ä¾èµ–çš„å®Œæ•´æµç¨‹ï¼š

```bash
# å®Œæ•´æ›´æ–°æµç¨‹ï¼ˆé»˜è®¤ä¼šå…ˆå¤‡ä»½ï¼‰
pnpm koharu update

# ä»…æ£€æŸ¥æ˜¯å¦æœ‰æ›´æ–°
pnpm koharu update --check

# è·³è¿‡å¤‡ä»½ç›´æ¥æ›´æ–°
pnpm koharu update --skip-backup

# å¼ºåˆ¶æ¨¡å¼ï¼ˆè·³è¿‡å·¥ä½œåŒºæ£€æŸ¥å’Œç¡®è®¤ï¼‰
pnpm koharu update --force

# æ›´æ–°åˆ°æŒ‡å®šç‰ˆæœ¬ï¼ˆå¦‚ v2.1.0ï¼‰
pnpm koharu update --tag v2.1.0

# clean æ¨¡å¼ï¼ˆé›¶å†²çªï¼Œå¼ºåˆ¶å¤‡ä»½ï¼Œé€‚åˆé¦–æ¬¡è¿ç§»æˆ–å†²çªè¾ƒå¤šæ—¶ï¼‰
pnpm koharu update --clean

# rebase æ¨¡å¼ï¼ˆé‡å†™å†å²ï¼Œå¼ºåˆ¶å¤‡ä»½ï¼Œé€‚åˆç†Ÿæ‚‰ git çš„ç”¨æˆ·ï¼‰
pnpm koharu update --rebase

# é¢„è§ˆæ“ä½œï¼ˆä¸å®é™…æ‰§è¡Œï¼Œå¯é…åˆ --clean æˆ– --rebase ä½¿ç”¨ï¼‰
pnpm koharu update --dry-run
```

**é€‰é¡¹è¯´æ˜ï¼š**

| é€‰é¡¹            | è¯´æ˜                                                |
| --------------- | --------------------------------------------------- |
| `--check`       | ä»…æ£€æŸ¥æ›´æ–°ï¼Œä¸æ‰§è¡Œåˆå¹¶                              |
| `--skip-backup` | è·³è¿‡å¤‡ä»½æ­¥éª¤ï¼ˆclean/rebase æ¨¡å¼ä¸‹æ— æ•ˆï¼Œå¼ºåˆ¶å¤‡ä»½ï¼‰   |
| `--force`       | è·³è¿‡å·¥ä½œåŒºè„æ£€æŸ¥å’Œç¡®è®¤æç¤ºï¼ˆä¸å½±å“åˆå¹¶æ–¹å¼ï¼‰        |
| `--tag`         | æŒ‡å®šç›®æ ‡ç‰ˆæœ¬ï¼ˆå¦‚ `v2.1.0`ï¼‰ï¼Œæ”¯æŒå‡çº§å’Œé™çº§         |
| `--clean`       | Clean æ¨¡å¼ï¼Œé›¶å†²çªæ›´æ–°ï¼ˆæ›¿æ¢ä¸»é¢˜æ–‡ä»¶ + è¿˜åŸç”¨æˆ·å†…å®¹ï¼‰|
| `--rebase`      | Rebase æ¨¡å¼ï¼Œé‡å†™å†å²å®Œå…¨åŒæ­¥ä¸Šæ¸¸ï¼ˆå¼ºåˆ¶è¦æ±‚å¤‡ä»½ï¼‰   |
| `--dry-run`     | é¢„è§ˆæ“ä½œï¼Œä¸å®é™…æ‰§è¡Œ                                |

**ä¸‰ç§æ›´æ–°æ¨¡å¼ï¼š**

| æ¨¡å¼ | å‘½ä»¤ | é€‚åˆåœºæ™¯ | å¤‡ä»½ | å†²çªå¤„ç† |
|------|------|---------|------|---------|
| **é»˜è®¤** | `pnpm koharu update` | æ—¥å¸¸æ›´æ–° | å¯é€‰ | ç”¨æˆ·å†…å®¹è‡ªåŠ¨ä¿ç•™ï¼Œä¸»é¢˜å†²çªæ‰‹åŠ¨è§£å†³ |
| **Clean** | `--clean` | é¦–æ¬¡è¿ç§»ã€å†²çªè¾ƒå¤š | å¼ºåˆ¶ | é›¶å†²çª |
| **Rebase** | `--rebase` | ç†Ÿæ‚‰ git çš„ç”¨æˆ· | å¼ºåˆ¶ | éœ€æ‰‹åŠ¨è§£å†³ |

**é»˜è®¤æ¨¡å¼ï¼ˆMergeï¼‰ï¼š**

ä½¿ç”¨ `git merge --no-ff` åˆå¹¶ä¸Šæ¸¸æ›´æ–°ï¼Œä¿ç•™ merge-base ä¿¡æ¯ï¼Œè®©åç»­æ›´æ–°çš„å†²çªæ›´å°‘ã€‚

æ™ºèƒ½å†²çªå¤„ç†ï¼š

- **ç”¨æˆ·å†…å®¹æ–‡ä»¶**ï¼ˆåšå®¢æ–‡ç« ã€é…ç½®ã€ç‹¬ç«‹é¡µé¢ã€å›¾ç‰‡ç­‰ï¼‰å‘ç”Ÿå†²çªæ—¶ï¼Œè‡ªåŠ¨ä¿ç•™æœ¬åœ°ç‰ˆæœ¬
- **ä¸»é¢˜æ–‡ä»¶**ï¼ˆç»„ä»¶ã€è„šæœ¬ã€æ ·å¼ç­‰ï¼‰å‘ç”Ÿå†²çªæ—¶ï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³
- å¦‚æœæ‰€æœ‰å†²çªéƒ½æ˜¯ç”¨æˆ·å†…å®¹ â†’ æ•´ä¸ªæ›´æ–°è‡ªåŠ¨å®Œæˆï¼Œé›¶æ‰‹åŠ¨æ“ä½œ

ğŸ“ **æäº¤æ ¼å¼ï¼š**

```plain
chore: merge upstream theme v2.3.2
```

**Clean æ¨¡å¼ï¼š**

ç”¨ä¸Šæ¸¸æœ€æ–°ç‰ˆæœ¬**æ›¿æ¢æ‰€æœ‰ä¸»é¢˜æ–‡ä»¶**ï¼Œç„¶åä»å¤‡ä»½**è¿˜åŸç”¨æˆ·å†…å®¹**ï¼Œå®ç°é›¶å†²çªæ›´æ–°ã€‚

æ‰§è¡Œæµç¨‹ï¼š
1. å¼ºåˆ¶å¤‡ä»½ä½ çš„åšå®¢å†…å®¹
2. åˆ›å»º merge commit è®°å½•ç‰ˆæœ¬å…³ç³»
3. ç”¨ä¸Šæ¸¸æ–‡ä»¶è¦†ç›–æœ¬åœ°æ‰€æœ‰æ–‡ä»¶
4. ä»åˆšæ‰çš„å¤‡ä»½è¿˜åŸç”¨æˆ·å†…å®¹ï¼ˆåšå®¢æ–‡ç« ã€é…ç½®ã€ç‹¬ç«‹é¡µé¢ã€å›¾ç‰‡ã€.envï¼‰

âš ï¸ **æ³¨æ„ï¼š**

- ä½ å¯¹**ä¸»é¢˜æ–‡ä»¶**çš„è‡ªå®šä¹‰ä¿®æ”¹ï¼ˆå¦‚æ”¹äº†æŸä¸ªç»„ä»¶ã€å¸ƒå±€ã€æ ·å¼ï¼‰**ä¸ä¼šè¢«ä¿ç•™**
- å¤‡ä»½èŒƒå›´åŒ…å«ï¼š`src/content/blog/`ã€`config/site.yaml`ã€`src/pages/*.md`ã€`public/img/`ã€`.env`
- ä½¿ç”¨ `--full` å¤‡ä»½é€‰é¡¹å¯é¢å¤–ä¿ç•™ faviconã€LQIPã€ç›¸ä¼¼åº¦ã€AI æ‘˜è¦ç­‰ç”Ÿæˆèµ„äº§

é€‚ç”¨åœºæ™¯ï¼š
- é¦–æ¬¡ä»æ—§ç‰ˆæœ¬è¿ç§»ï¼Œå†å²å†²çªå¤ªå¤šæ— æ³•æ­£å¸¸ merge
- æ²¡æœ‰è‡ªå®šä¹‰ä¸»é¢˜æ–‡ä»¶ï¼Œåªå†™äº†åšå®¢å†…å®¹

**Rebase æ¨¡å¼ï¼š**

æ‰§è¡Œ `git rebase upstream/main`ï¼ˆæˆ–æŒ‡å®šçš„ tagï¼‰ï¼Œå°†æœ¬åœ°æäº¤é‡æ”¾åˆ°ä¸Šæ¸¸ä¹‹ä¸Šã€‚é€‚åˆç†Ÿæ‚‰ git æ“ä½œçš„ç”¨æˆ·ã€‚

âš ï¸ **æ³¨æ„**ï¼šRebase æ¨¡å¼ä¼šé‡å†™ Git å†å²ï¼Œè¯·ç¡®ä¿å·²å¤‡ä»½é‡è¦å†…å®¹ã€‚CLI ä¼šå¼ºåˆ¶è¦æ±‚å¤‡ä»½ï¼ˆå¿½ç•¥ `--skip-backup` å’Œ `--force`ï¼‰ã€‚

**ä½¿ç”¨ `--dry-run` é¢„è§ˆï¼š**

æ‰€æœ‰æ¨¡å¼éƒ½æ”¯æŒ `--dry-run` é¢„è§ˆæ“ä½œæ•ˆæœï¼š

```bash
pnpm koharu update --dry-run          # é¢„è§ˆé»˜è®¤ merge
pnpm koharu update --clean --dry-run  # é¢„è§ˆ clean æ¨¡å¼
pnpm koharu update --rebase --dry-run # é¢„è§ˆ rebase æ“ä½œ
```

> **ğŸ’¡ ç»™ç†Ÿæ‚‰ git çš„ç”¨æˆ·ï¼š** CLI æ›´æ–°å‘½ä»¤æ˜¯å¯¹ git æ“ä½œçš„å°è£…ä¾¿åˆ©å·¥å…·ã€‚å¦‚æœä½ å¯¹ git æ¯”è¾ƒç†Ÿæ‚‰ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ `git fetch upstream && git rebase upstream/main` æ‰‹åŠ¨æ“ä½œï¼Œè¿™æ ·èƒ½æ›´ç²¾ç¡®åœ°æ§åˆ¶åˆå¹¶è¿‡ç¨‹ã€‚

**æ›´æ–°æµç¨‹è¯´æ˜ï¼š**

1. **æ£€æŸ¥ Git çŠ¶æ€** â€” ç¡®ä¿å·¥ä½œåŒºå¹²å‡€ï¼ˆæ— æœªæäº¤çš„æ›´æ”¹ï¼‰
2. **å¤‡ä»½å½“å‰å†…å®¹** â€” å¯é€‰ï¼ˆclean/rebase æ¨¡å¼å¼ºåˆ¶å¤‡ä»½ï¼‰
3. **è®¾ç½® upstream** â€” è‡ªåŠ¨æ·»åŠ  `upstream` remoteï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
4. **è·å–æœ€æ–°ä»£ç ** â€” `git fetch upstream`
5. **æ˜¾ç¤ºæ›´æ–°é¢„è§ˆ** â€” åˆ—å‡ºæ–°å¢çš„æäº¤å’Œæ›´æ–°æ—¥å¿—
6. **æ‰§è¡Œæ›´æ–°** â€” æ ¹æ®æ‰€é€‰æ¨¡å¼æ‰§è¡Œ merge / clean / rebase
7. **å®‰è£…ä¾èµ–** â€” `pnpm install`

**å¤„ç†åˆå¹¶å†²çªï¼š**

é»˜è®¤ merge æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å†…å®¹å†²çªä¼šè¢«è‡ªåŠ¨è§£å†³ï¼ˆä¿ç•™æœ¬åœ°ç‰ˆæœ¬ï¼‰ã€‚å¦‚æœä¸»é¢˜æ–‡ä»¶ä»æœ‰å†²çªï¼ŒCLI ä¼šæ˜¾ç¤ºå†²çªæ–‡ä»¶åˆ—è¡¨ã€‚ä½ å¯ä»¥ï¼š

1. é€‰æ‹©"ä¸­æ­¢åˆå¹¶"æ¢å¤åˆ°æ›´æ–°å‰çŠ¶æ€
2. æ‰‹åŠ¨è§£å†³å†²çªåè¿è¡Œ `git add . && git commit`

```bash
# å¦‚æœé€‰æ‹©æ‰‹åŠ¨è§£å†³å†²çª
git status                    # æŸ¥çœ‹å†²çªæ–‡ä»¶
# ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œä¿ç•™éœ€è¦çš„å†…å®¹
git add .
git commit -m "merge: resolve conflicts"
```

**æ›´æ–°æ—¶ä½¿ç”¨çš„ Git å‘½ä»¤ï¼š**

| æ“ä½œ           | å‘½ä»¤                                                                   |
| -------------- | ---------------------------------------------------------------------- |
| æ£€æŸ¥å·¥ä½œåŒºçŠ¶æ€ | `git status --porcelain`                                               |
| è·å–å½“å‰åˆ†æ”¯   | `git rev-parse --abbrev-ref HEAD`                                      |
| æ£€æŸ¥ upstream  | `git remote -v`                                                        |
| æ·»åŠ  upstream  | `git remote add upstream https://github.com/cosZone/astro-koharu.git`  |
| è·å–æ›´æ–°       | `git fetch upstream`                                                   |
| æŸ¥çœ‹æ–°æäº¤æ•°é‡ | `git rev-list --left-right --count HEAD...upstream/main`               |
| æŸ¥çœ‹æ–°æäº¤åˆ—è¡¨ | `git log HEAD..upstream/main --pretty=format:"%h \| %s \| %ar \| %an"` |
| é»˜è®¤åˆå¹¶       | `git merge --no-ff upstream/main`                                      |
| Clean åˆå¹¶     | `git merge -s ours upstream/main` + `git checkout upstream/main -- .`  |
| Rebase         | `git rebase upstream/main`                                             |
| ä¸­æ­¢åˆå¹¶       | `git merge --abort`                                                    |

#### å†…å®¹ç”Ÿæˆ

ç”Ÿæˆå„ç§å†…å®¹èµ„äº§ï¼š

```bash
# äº¤äº’å¼é€‰æ‹©ç”Ÿæˆç±»å‹
pnpm koharu generate

# æˆ–ç›´æ¥æŒ‡å®šç±»å‹
pnpm koharu generate lqips        # ç”Ÿæˆ LQIP å›¾ç‰‡å ä½ç¬¦
pnpm koharu generate similarities # ç”Ÿæˆè¯­ä¹‰ç›¸ä¼¼åº¦å‘é‡
pnpm koharu generate summaries    # ç”Ÿæˆ AI æ‘˜è¦
pnpm koharu generate all          # ç”Ÿæˆå…¨éƒ¨
```

### å¦‚ä½•æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` ç›®å½•åˆ›å»º `.astro` æ–‡ä»¶
2. Astro ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼Œæ–‡ä»¶è·¯å¾„å³ URL è·¯å¾„

ç¤ºä¾‹ï¼š

```plain
src/pages/about.astro       â†’ /about
src/pages/tags/[tag].astro  â†’ /tags/:tagï¼ˆåŠ¨æ€è·¯ç”±ï¼‰
```

### å¦‚ä½•è‡ªå®šä¹‰æ ·å¼

**å…¨å±€æ ·å¼ï¼š**

ç¼–è¾‘ `src/styles/index.css`ã€‚

**ç»„ä»¶æ ·å¼ï¼š**

ä½¿ç”¨ Tailwind CSS å·¥å…·ç±»æˆ– Astro çš„ `<style>` æ ‡ç­¾ã€‚

**Tailwind é…ç½®ï¼š**

ç¼–è¾‘ `tailwind.config.ts` è‡ªå®šä¹‰ä¸»é¢˜ã€é¢œè‰²ã€å­—ä½“ç­‰ã€‚

**ä¸»é¢˜å˜é‡ï¼š**

åœ¨ `src/styles/index.css` ä¸­å®šä¹‰çš„ CSS å˜é‡ï¼š

```css
:root {
  --primary-color: #ff6b6b;
  /* ... æ›´å¤šå˜é‡ */
}
```

### åŠ¨ç”»ç³»ç»Ÿ

ä½¿ç”¨ CSS åŠ¨ç”»ä»¥åŠ [Motion](https://motion.dev/)ã€‚

**åŠ¨ç”»é…ç½®ï¼š**

åœ¨ `src/constants/anim/` ç›®å½•ä¸­ï¼š

- `spring.ts` - å¼¹ç°§åŠ¨ç”»é…ç½®
- `variants.ts` - åŠ¨ç”»å˜ä½“å®šä¹‰
- `props.ts` - å¯å¤ç”¨çš„åŠ¨ç”»å±æ€§

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

```tsx
import { motion } from "motion/react";
import { fadeIn } from "@constants/anim/variants";

<motion.div variants={fadeIn} initial="hidden" animate="visible">
  å†…å®¹
</motion.div>;
```

## ä¸ Hexo/Shoka ä¸»é¢˜çš„å¯¹æ¯”

### ä¿ç•™çš„ç‰¹æ€§

- âœ… åˆ†ç±»å’Œæ ‡ç­¾ç³»ç»Ÿ
- âœ… æ–‡ç« ç½®é¡¶åŠŸèƒ½
- âœ… æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
- âœ… å“åº”å¼è®¾è®¡
- âœ… å‹é“¾é¡µé¢
- âœ… å½’æ¡£é¡µé¢

### æ”¹è¿›ä¹‹å¤„

**æ€§èƒ½ï¼š**

- âš¡ é™æ€ç«™ç‚¹ç”Ÿæˆ (SSG)ï¼ŒåŠ è½½é€Ÿåº¦æ›´å¿«
- âš¡ æŒ‰éœ€åŠ è½½ JavaScript
- âš¡ å›¾ç‰‡ä¼˜åŒ–

**å¼€å‘ä½“éªŒï¼š**

- ğŸ› ï¸ TypeScript ç±»å‹å®‰å…¨
- ğŸ› ï¸ çƒ­æ¨¡å—æ›¿æ¢ (HMR)
- ğŸ› ï¸ ç°ä»£åŒ–çš„å¼€å‘å·¥å…·é“¾

**åŠŸèƒ½å¢å¼ºï¼š**

- ğŸ” æ›´å¼ºå¤§çš„å…¨ç«™æœç´¢ï¼ˆPagefindï¼‰
- ğŸ“ å†…å®¹é›†åˆ (Content Collections) ç±»å‹å®‰å…¨
- ğŸ¨ Tailwind CSS 4.x æ ·å¼ç³»ç»Ÿ
- ğŸŒŠ View Transitions API é¡µé¢è¿‡æ¸¡

### æŠ€æœ¯æ ˆå·®å¼‚

| æ–¹é¢     | Hexo + Shoka   | astro-koharu        |
| -------- | -------------- | ------------------- |
| æ¡†æ¶     | Hexo (Node.js) | Astro 5.x           |
| æ¨¡æ¿å¼•æ“ | EJS/Pug        | Astro + React       |
| æ ·å¼     | Stylus         | Tailwind CSS 4.x    |
| æ„å»ºå·¥å…· | Webpack        | Vite                |
| ç±»å‹æ£€æŸ¥ | æ—              | TypeScript          |
| å†…å®¹ç®¡ç† | æ–‡ä»¶ç³»ç»Ÿ       | Content Collections |

## å¸¸è§é—®é¢˜

### å¦‚ä½•ä¿®æ”¹å°é¢å›¾ç‰‡ï¼Ÿ

åœ¨æ–‡ç«  frontmatter ä¸­è®¾ç½® `cover` å­—æ®µï¼š

```yaml
cover: /img/cover/1.webp
```

å›¾ç‰‡æ”¾åœ¨ `public/img/` ç›®å½•ã€‚å¦‚æœä¸è®¾ç½®ï¼Œä¼šä½¿ç”¨é»˜è®¤å°é¢ã€‚

### å¦‚ä½•è‡ªå®šä¹‰åŸŸåï¼Ÿ

éƒ¨ç½²åˆ° Vercel åï¼Œåœ¨ Vercel é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼Œç„¶åæ›´æ–° `config/site.yaml` ä¸­çš„ `site.url` å­—æ®µã€‚

### å¦‚ä½•æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼Ÿ

é¡¹ç›®æ”¯æŒä¸‰ç§è¯„è®ºç³»ç»Ÿï¼š**Waline**ã€**Giscus**ã€**Remark42**ã€‚åœ¨ `config/site.yaml` çš„ `comment` é…ç½®å—ä¸­é€‰æ‹©ä½¿ç”¨çš„æä¾›å•†ã€‚

#### Walineï¼ˆæ¨èï¼‰

[Waline](https://waline.js.org/) æ˜¯ä¸€ä¸ªç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿï¼Œæ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼ˆVercelã€Railwayã€Zeabur ç­‰ï¼‰ã€‚

**ç‰¹ç‚¹ï¼š**

- ğŸš€ éƒ¨ç½²ç®€å•ï¼Œæ”¯æŒå¤šç§å¹³å°ä¸€é”®éƒ¨ç½²
- ğŸ’¬ æ”¯æŒ Markdownã€è¡¨æƒ…ã€@æåŠã€é‚®ä»¶é€šçŸ¥
- ğŸ“Š å†…ç½®æµè§ˆé‡ç»Ÿè®¡ã€è¯„è®ºç®¡ç†åå°
- ğŸ” æ”¯æŒå¤šç§ç™»å½•æ–¹å¼ï¼ˆåŒ¿åã€ç¤¾äº¤è´¦å·ï¼‰
- ğŸ›¡ï¸ å†…ç½®ååƒåœ¾è¯„è®ºã€æ•æ„Ÿè¯è¿‡æ»¤
- ğŸ¨ è‡ªåŠ¨è·Ÿéšç«™ç‚¹æ·±è‰²/æµ…è‰²ä¸»é¢˜

**å‰ç½®è¦æ±‚ï¼š**

1. éƒ¨ç½² Waline æœåŠ¡ç«¯ï¼ˆ[éƒ¨ç½²æŒ‡å—](https://waline.js.org/guide/deploy/)ï¼‰
2. è·å–æœåŠ¡ç«¯ URL

**é…ç½®ç¤ºä¾‹ï¼š**

```yaml
comment:
  provider: waline
  waline:
    serverURL: https://your-waline-server.vercel.app # Waline æœåŠ¡ç«¯åœ°å€ï¼ˆå¿…å¡«ï¼‰
    lang: zh-CN # è¯­è¨€
    dark: html.dark # æš—é»‘æ¨¡å¼ CSS é€‰æ‹©å™¨
    meta: # è¯„è®ºè€…ä¿¡æ¯å­—æ®µ
      - nick
      - mail
      - link
    requiredMeta: # å¿…å¡«å­—æ®µ
      - nick
    login: enable # ç™»å½•æ¨¡å¼ ('enable' | 'disable' | 'force')
    wordLimit: 0 # è¯„è®ºå­—æ•°é™åˆ¶ (0 = æ— é™åˆ¶)
    pageSize: 10 # æ¯é¡µè¯„è®ºæ•°
    imageUploader: false # å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
    highlighter: true # ä»£ç é«˜äº®
    texRenderer: false # LaTeX æ¸²æŸ“
    search: false # æœç´¢åŠŸèƒ½
    reaction: false # æ–‡ç« ååº”åŠŸèƒ½
    # recaptchaV3Key: '' # reCAPTCHA v3 Key (å¯é€‰)
    # turnstileKey: '' # Cloudflare Turnstile Key (å¯é€‰)
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•°             | ç±»å‹                                   | é»˜è®¤å€¼                   | è¯´æ˜                                 |
| ---------------- | -------------------------------------- | ------------------------ | ------------------------------------ |
| `serverURL`      | `string`                               | **å¿…å¡«**                 | Waline æœåŠ¡ç«¯åœ°å€                    |
| `lang`           | `string`                               | `'zh-CN'`                | ç•Œé¢è¯­è¨€ï¼ˆæ”¯æŒ zh-CN, en, jp ç­‰ï¼‰    |
| `dark`           | `string`                               | `'html.dark'`            | æš—é»‘æ¨¡å¼ CSS é€‰æ‹©å™¨                  |
| `meta`           | `string[]`                             | `['nick','mail','link']` | è¯„è®ºè€…ä¿¡æ¯å­—æ®µ                       |
| `requiredMeta`   | `string[]`                             | `['nick']`               | å¿…å¡«å­—æ®µ                             |
| `login`          | `'enable'` \| `'disable'` \| `'force'` | `'enable'`               | ç™»å½•æ¨¡å¼                             |
| `wordLimit`      | `number`                               | `0`                      | è¯„è®ºå­—æ•°é™åˆ¶ï¼ˆ0 = æ— é™åˆ¶ï¼‰           |
| `pageSize`       | `number`                               | `10`                     | æ¯é¡µè¯„è®ºæ•°                           |
| `imageUploader`  | `boolean`                              | `false`                  | æ˜¯å¦å¯ç”¨å›¾ç‰‡ä¸Šä¼                      |
| `highlighter`    | `boolean`                              | `true`                   | æ˜¯å¦å¯ç”¨ä»£ç é«˜äº®                     |
| `texRenderer`    | `boolean`                              | `false`                  | æ˜¯å¦å¯ç”¨ LaTeX æ¸²æŸ“                  |
| `search`         | `boolean`                              | `false`                  | æ˜¯å¦å¯ç”¨æœç´¢åŠŸèƒ½                     |
| `reaction`       | `boolean`                              | `false`                  | æ˜¯å¦å¯ç”¨æ–‡ç« ååº”åŠŸèƒ½                 |
| `recaptchaV3Key` | `string`                               | -                        | reCAPTCHA v3 Keyï¼ˆå¯é€‰ï¼Œé˜²åƒåœ¾è¯„è®ºï¼‰ |
| `turnstileKey`   | `string`                               | -                        | Cloudflare Turnstile Keyï¼ˆå¯é€‰ï¼‰     |

**éƒ¨ç½² Waline æœåŠ¡ç«¯ï¼š**

æ¨èä½¿ç”¨ Vercel ä¸€é”®éƒ¨ç½²ï¼š

1. è®¿é—® [Waline å¿«é€Ÿå¼€å§‹](https://waline.js.org/guide/get-started/)
2. ç‚¹å‡» "Deploy with Vercel" æŒ‰é’®
3. ç™»å½• Vercelï¼Œæˆæƒ GitHub ä»“åº“
4. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆæ•°æ®åº“è¿æ¥ã€ç®¡ç†å‘˜é‚®ç®±ç­‰ï¼‰
5. éƒ¨ç½²å®Œæˆåè·å–æœåŠ¡ç«¯ URLï¼ˆå¦‚ `https://your-waline.vercel.app`ï¼‰

**ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼š**

Waline ç»„ä»¶å·²å®ç°ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼Œé€šè¿‡ `dark` å‚æ•°ï¼ˆé»˜è®¤ `html.dark`ï¼‰è‡ªåŠ¨è·Ÿéšç«™ç‚¹æ·±è‰²/æµ…è‰²æ¨¡å¼ã€‚

**å‚è€ƒé“¾æ¥ï¼š**

- [Waline å®˜ç½‘](https://waline.js.org/)
- [éƒ¨ç½²æŒ‡å—](https://waline.js.org/guide/deploy/)
- [é…ç½®å‚æ•°](https://waline.js.org/reference/client/)

#### Remark42

[Remark42](https://remark42.com/) æ˜¯ä¸€ä¸ªè½»é‡çº§çš„è‡ªæ‰˜ç®¡è¯„è®ºç³»ç»Ÿï¼Œéšç§å‹å¥½ï¼Œæ— éœ€ç¬¬ä¸‰æ–¹æœåŠ¡ã€‚

**ç‰¹ç‚¹ï¼š**

- ğŸ”’ è‡ªæ‰˜ç®¡ï¼Œå®Œå…¨æŒæ§æ•°æ®
- ğŸš« æ— å¹¿å‘Šã€æ— è¿½è¸ª
- ğŸ’¾ æ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆBoltDBã€Memoryï¼‰
- ğŸ” æ”¯æŒå¤šç§ç¤¾äº¤ç™»å½•ï¼ˆGitHubã€Googleã€Twitter ç­‰ï¼‰
- ğŸ“§ é‚®ä»¶é€šçŸ¥ã€è¯„è®ºå®¡æ ¸
- ğŸ¨ è‡ªåŠ¨è·Ÿéšç«™ç‚¹æ·±è‰²/æµ…è‰²ä¸»é¢˜

**å‰ç½®è¦æ±‚ï¼š**

1. éƒ¨ç½² Remark42 æœåŠ¡ç«¯ï¼ˆ[éƒ¨ç½²æŒ‡å—](https://remark42.com/docs/getting-started/installation/)ï¼‰
2. é…ç½®ç«™ç‚¹ ID å’ŒåŸŸå

**é…ç½®ç¤ºä¾‹ï¼š**

```yaml
comment:
  provider: remark42
  remark42:
    host: https://comment.example.com/ # Remark42 æœåŠ¡å™¨åœ°å€ï¼ˆå¿…å¡«ï¼‰
    siteId: your-site-id # ç«™ç‚¹ IDï¼ˆå¿…å¡«ï¼‰
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•°     | ç±»å‹     | è¯´æ˜                                                          |
| -------- | -------- | ------------------------------------------------------------- |
| `host`   | `string` | Remark42 æœåŠ¡å™¨åœ°å€ï¼ˆ**å¿…å¡«**ï¼Œéœ€å¸¦ `http://` æˆ– `https://`ï¼‰ |
| `siteId` | `string` | ç«™ç‚¹ IDï¼ˆ**å¿…å¡«**ï¼Œåœ¨ Remark42 æœåŠ¡ç«¯é…ç½®ä¸­å®šä¹‰ï¼‰             |

**éƒ¨ç½² Remark42 æœåŠ¡ç«¯ï¼š**

æ¨èä½¿ç”¨ Docker éƒ¨ç½²ï¼š

```bash
docker run -d \
  --name remark42 \
  -p 8080:8080 \
  -e REMARK_URL=https://comment.example.com \
  -e SECRET=your-secret-key \
  -e SITE=your-site-id \
  -e AUTH_GITHUB_CID=your-github-client-id \
  -e AUTH_GITHUB_CSEC=your-github-client-secret \
  -v /path/to/data:/srv/var \
  umputun/remark42:latest
```

è¯¦ç»†é…ç½®è¯·å‚è€ƒ [Remark42 å®‰è£…æŒ‡å—](https://remark42.com/docs/getting-started/installation/)ã€‚

**ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼š**

Remark42 ç»„ä»¶å·²å®ç°ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼Œä½¿ç”¨ `MutationObserver` ç›‘å¬ç«™ç‚¹ä¸»é¢˜å˜åŒ–ï¼Œè‡ªåŠ¨è°ƒç”¨ `window.REMARK42.changeTheme()` æ›´æ–°è¯„è®ºæ¡†ä¸»é¢˜ã€‚

**å‚è€ƒé“¾æ¥ï¼š**

- [Remark42 å®˜ç½‘](https://remark42.com/)
- [å®‰è£…æŒ‡å—](https://remark42.com/docs/getting-started/installation/)
- [é…ç½®æ–‡æ¡£](https://remark42.com/docs/configuration/)

#### Giscus

[Giscus](https://giscus.app) æ˜¯åŸºäº GitHub Discussions çš„è¯„è®ºç³»ç»Ÿï¼Œæ— éœ€è‡ªå»ºåç«¯ï¼Œè¯„è®ºæ•°æ®å­˜å‚¨åœ¨ä½ çš„ GitHub ä»“åº“ä¸­ã€‚

å…·ä½“é…ç½®å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šhttps://zhuanlan.zhihu.com/p/693434928

**å‰ç½®è¦æ±‚ï¼š**

1. ä»“åº“å¿…é¡»æ˜¯[å…¬å¼€çš„](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/managing-repository-settings/setting-repository-visibility#making-a-repository-public)
2. å®‰è£… [giscus app](https://github.com/apps/giscus)
3. åœ¨ä»“åº“ä¸­[å¯ç”¨ Discussions åŠŸèƒ½](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/enabling-or-disabling-github-discussions-for-a-repository)

**è·å–é…ç½®å‚æ•°ï¼š**

1. è®¿é—® [giscus.app](https://giscus.app/zh-CN)
2. è¾“å…¥ä½ çš„ä»“åº“åç§°ï¼ˆæ ¼å¼ï¼š`owner/repo`ï¼‰
3. é€‰æ‹©é¡µé¢ä¸ Discussion çš„æ˜ å°„æ–¹å¼ï¼ˆæ¨è `pathname`ï¼‰
4. é€‰æ‹© Discussion åˆ†ç±»ï¼ˆæ¨è `Announcements`ï¼‰
5. å¯ç”¨æ‰€éœ€åŠŸèƒ½ï¼ˆreactionsã€è¯„è®ºæ¡†ä½ç½®ç­‰ï¼‰
6. å¤åˆ¶ç”Ÿæˆçš„ `data-repo-id` å’Œ `data-category-id`

**é…ç½®ç¤ºä¾‹ï¼š**

```yaml
comment:
  provider: giscus
  giscus:
    repo: username/repo # GitHub ä»“åº“å (owner/repo æ ¼å¼)
    repoId: R_kgDOxxxxxx # ä»“åº“ ID (ä» giscus.app è·å–)
    category: Announcements # Discussion åˆ†ç±»åç§°
    categoryId: DIC_kwDOxxxxxx # åˆ†ç±» ID (ä» giscus.app è·å–)
    mapping: pathname # æ˜ å°„æ–¹å¼
    reactionsEnabled: "1" # å¯ç”¨ reactions ('1' å¯ç”¨, '0' ç¦ç”¨)
    emitMetadata: "0" # å‘é€å…ƒæ•°æ®
    inputPosition: top # è¾“å…¥æ¡†ä½ç½® ('top' | 'bottom')
    lang: zh-CN # è¯­è¨€
```

**å‚æ•°è¯´æ˜ï¼š**

| å‚æ•°               | ç±»å‹                | è¯´æ˜                                          |
| ------------------ | ------------------- | --------------------------------------------- |
| `repo`             | `string`            | GitHub ä»“åº“ï¼Œæ ¼å¼ä¸º `owner/repo`              |
| `repoId`           | `string`            | ä»“åº“ IDï¼Œä» giscus.app è·å–                   |
| `category`         | `string`            | Discussion åˆ†ç±»åç§°                           |
| `categoryId`       | `string`            | åˆ†ç±» IDï¼Œä» giscus.app è·å–                   |
| `mapping`          | `string`            | é¡µé¢ä¸ Discussion çš„æ˜ å°„æ–¹å¼                  |
| `term`             | `string`            | å½“ `mapping` ä¸º `specific` æˆ– `number` æ—¶ä½¿ç”¨ |
| `strict`           | `'0' \| '1'`        | ä¸¥æ ¼åŒ¹é…æ¨¡å¼ï¼Œé»˜è®¤ `'0'`                      |
| `reactionsEnabled` | `'0' \| '1'`        | æ˜¯å¦å¯ç”¨ reactionsï¼Œé»˜è®¤ `'1'`                |
| `emitMetadata`     | `'0' \| '1'`        | æ˜¯å¦å‘é€é¡µé¢å…ƒæ•°æ®ï¼Œé»˜è®¤ `'0'`                |
| `inputPosition`    | `'top' \| 'bottom'` | è¯„è®ºè¾“å…¥æ¡†ä½ç½®ï¼Œé»˜è®¤ `'top'`                  |
| `lang`             | `string`            | ç•Œé¢è¯­è¨€ï¼Œé»˜è®¤ `'zh-CN'`                      |
| `host`             | `string`            | è‡ªæ‰˜ç®¡ Giscus å®ä¾‹çš„åœ°å€ï¼ˆå¯é€‰ï¼‰              |
| `theme`            | `string`            | å›ºå®šä¸»é¢˜ï¼ˆä¸è®¾ç½®åˆ™è·Ÿéšç«™ç‚¹ä¸»é¢˜åˆ‡æ¢ï¼‰          |
| `loading`          | `'lazy' \| 'eager'` | åŠ è½½æ–¹å¼ï¼Œé»˜è®¤ `'lazy'`                       |

**æ˜ å°„æ–¹å¼è¯´æ˜ï¼š**

- `pathname`ï¼ˆæ¨èï¼‰ï¼šä½¿ç”¨é¡µé¢è·¯å¾„åŒ¹é…ï¼Œå¦‚ `/post/my-article`
- `url`ï¼šä½¿ç”¨å®Œæ•´ URL åŒ¹é…
- `title`ï¼šä½¿ç”¨é¡µé¢æ ‡é¢˜åŒ¹é…
- `og:title`ï¼šä½¿ç”¨ Open Graph æ ‡é¢˜åŒ¹é…
- `specific`ï¼šä½¿ç”¨ `term` å‚æ•°æŒ‡å®šçš„å€¼
- `number`ï¼šä½¿ç”¨ `term` å‚æ•°æŒ‡å®šçš„ Discussion ç¼–å·

**ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼š**

æœ¬ä¸»é¢˜å·²å®ç° Giscus è¯„è®ºæ¡†çš„ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢ï¼Œä¼šè·Ÿéšç«™ç‚¹çš„æ·±è‰²/æµ…è‰²æ¨¡å¼è‡ªåŠ¨è°ƒæ•´ã€‚å®ç°åŸç†ï¼š

1. ç»„ä»¶æŒ‚è½½æ—¶è¯»å–å½“å‰ä¸»é¢˜
2. ä½¿ç”¨ `MutationObserver` ç›‘å¬ `document.documentElement` çš„ `class` å˜åŒ–
3. æ£€æµ‹åˆ°ä¸»é¢˜åˆ‡æ¢æ—¶é€šè¿‡ `postMessage` é€šçŸ¥ Giscus iframe æ›´æ–°ä¸»é¢˜

**å‚è€ƒé“¾æ¥ï¼š**

- [giscus å®˜ç½‘](https://giscus.app/zh-CN)
- [giscus-component æ–‡æ¡£](https://github.com/giscus/giscus-component)

### è‰ç¨¿æ–‡ç« å¦‚ä½•é¢„è§ˆï¼Ÿ

è¿è¡Œ `pnpm dev` æœ¬åœ°å¼€å‘æ¨¡å¼ï¼Œè‰ç¨¿ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼ˆå¸¦ DRAFT æ ‡è¯†ï¼‰ã€‚

### å¦‚ä½•å…³é—­æŸäº›åŠŸèƒ½ï¼Ÿ

- **å…³é—­æŸä¸ªç³»åˆ—**ï¼šè®¾ç½®è¯¥ç³»åˆ—çš„ `enabled: false`
  ```yaml
  featuredSeries:
    - slug: weekly
      enabled: false # ç¦ç”¨æ­¤ç³»åˆ—
      # ...
  ```
- **å…³é—­æ‰€æœ‰ç³»åˆ—**ï¼šå°† `featuredSeries` è®¾ä¸ºç©ºæ•°ç»„ `[]`
- **å…³é—­æœç´¢**ï¼šç§»é™¤ `astro.config.mjs` ä¸­çš„ `pagefind()` é›†æˆ
- **å…³é—­ç»Ÿè®¡**ï¼šè®¾ç½® `analytics.umami.enabled = false`
- **å…³é—­è¯„è®º**ï¼šç§»é™¤ `comment.provider` é…ç½®æˆ–å°†å…¶è®¾ç½®ä¸ºç©º
- **å…³é—­ Shoka è¯­æ³•**ï¼šåœ¨ `config/site.yaml` çš„ `content` éƒ¨åˆ†å°†å¯¹åº”åŠŸèƒ½è®¾ä¸º `false`ï¼Œå¦‚ `enableShokaContainers: false`ï¼ˆå…³é—­æé†’å—/æŠ˜å å—/æ ‡ç­¾å¡ï¼‰ã€`enableShokaSpoiler: false`ï¼ˆå…³é—­éšè—æ–‡å­—ï¼‰ç­‰
- **å…³é—­æ•°å­¦å…¬å¼**ï¼šè®¾ç½® `content.enableMath = false`
- **å…³é—­ç»ƒä¹ é¢˜**ï¼šè®¾ç½® `content.enableQuiz = false`

### å¦‚ä½•æ›´æ”¹æ–‡ç«  URL æ ¼å¼ï¼Ÿ

é»˜è®¤ä½¿ç”¨æ–‡ä»¶åä½œä¸º URLã€‚å¯ä»¥é€šè¿‡ `link` å­—æ®µè‡ªå®šä¹‰ï¼š

```yaml
link: my-custom-url
```

### URL ç‰¹æ®Šå­—ç¬¦å¤„ç†

æ–‡ç« é“¾æ¥ï¼ˆ`link`ï¼‰å’Œæ ‡ç­¾ï¼ˆ`tags`ï¼‰æ”¯æŒåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œ URL ç¼–ç å¤„ç†ã€‚

**æ–‡ç« é“¾æ¥ç‰¹æ®Šå­—ç¬¦ï¼š**

```yaml
---
title: C# å­¦ä¹ ç¬”è®°
link: test-C# # åŒ…å« # å­—ç¬¦
---
```

è®¿é—®æ—¶ URL ä¼šè‡ªåŠ¨ç¼–ç ä¸º `/post/test-C%23`ï¼Œç¡®ä¿æµè§ˆå™¨æ­£ç¡®è§£æã€‚

**æ ‡ç­¾ç‰¹æ®Šå­—ç¬¦ï¼š**

```yaml
tags:
  - C#
  - C++
  - .NET
  - Node.js
```

æ ‡ç­¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸º URL å®‰å…¨çš„æ ¼å¼ï¼š

- `C#` â†’ `/tags/c%23`
- `C++` â†’ `/tags/c%2B%2B`
- `.NET` â†’ `/tags/.net`
- `Node.js` â†’ `/tags/node.js`

**æ³¨æ„äº‹é¡¹ï¼š**

- ç‰¹æ®Šå­—ç¬¦åŒ…æ‹¬ï¼š`#`ã€`+`ã€`&`ã€`?`ã€`%`ã€ç©ºæ ¼ç­‰
- æ ‡ç­¾ä¸­çš„ `/` ä¼šè¢«æ›¿æ¢ä¸º `-`ï¼ˆå¦‚ `å‰ç«¯/React` â†’ `å‰ç«¯-react`ï¼‰
- åˆ†ç±»åç§°é€šè¿‡ `categoryMap` æ˜ å°„ï¼Œå»ºè®®ä½¿ç”¨çº¯è‹±æ–‡ slug é¿å…ç¼–ç é—®é¢˜

## å‚è€ƒèµ„æº

- [Astro å®˜æ–¹æ–‡æ¡£](https://docs.astro.build/)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [Motion æ–‡æ¡£](https://motion.dev/docs)
- [Pagefind æ–‡æ¡£](https://pagefind.app/)
- [Shoka ä¸»é¢˜æ–‡æ¡£](https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/)

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](https://github.com/cosZone/astro-koharu/blob/main/CHANGELOG.md) äº†è§£ç‰ˆæœ¬æ›´æ–°å†å²ã€‚

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ [GitHub Issues](https://github.com/cosZone/astro-koharu/issues) ä¸­åé¦ˆã€‚
